const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/QRCodeSVG-AKltr53h.js","static/sanity-DyhyTRlS.js","static/LiveQueries-C-Chv7Gs.js","static/DisplayedDocumentBroadcaster-CaxBbJvr.js","static/PostMessageDocuments-5hTZfEqz.js","static/PostMessageRefreshMutations-aGHF0X78.js","static/PostMessagePerspective-BWL6Ou7N.js","static/PostMessagePreviewSnapshots-BvlO0JIB.js","static/PostMessageSchema-CY3y-YNl.js","static/PostMessageTelemetry-B4Zt_Eqf.js"])))=>i.map(i=>d[i]);
import{ac as Un,ad as qn,b7 as it,b8 as Fn,r as f,b9 as Ut,ba as Vn,j as u,bb as Hn,bc as tn,bd as nn,be as vt,bf as Ie,bg as Xe,bh as De,bi as Bn,bj as ct,bk as Kn,bl as Gn,aI as yt,bm as lt,bn as rn,bo as Pt,bp as Qn,bq as Xn,br as bt,bs as Jn,bt as Yn,bu as Zn,bv as St,bw as _t,bx as Fe,by as Ne,bz as jt,bA as Et,bB as $e,bC as Ue,bD as Ct,aJ as sn,bE as er,bF as an,bG as tr,bH as nr,b as L,V as ve,bI as ye,av as on,bJ as rr,bK as cn,Q as He,bL as sr,an as Rt,bM as ln,U as ar,bN as or,bO as ir,bP as cr,a4 as lr,x as un,bQ as ur,bR as qt,bS as dn,bT as pn,ae as dr,bU as pr,bV as mr,aH as ne,bW as hr,bX as Be,bY as mn,bZ as at,b_ as fr,b$ as gr,c0 as vr,c1 as yr,c2 as br,m as pe,c3 as Tt,c4 as It,c5 as wr,c6 as hn,c7 as Ft,E as xr,c8 as Pr,C as ue,A as fn,D as Ke,as as Se,c9 as Ze,T as Q,S as Oe,ca as et,ak as tt,_ as Ae,cb as kt,cc as Sr,cd as _r,ce as jr,cf as Er,cg as Cr,al as de,a as Rr,ch as ot,ci as Tr,cj as Ir,ck as kr,cl as qe,cm as gn,cn as Ar,co as Mr,Z as $r,cp as Or,cq as Lr,cr as zr,cs as vn,ct as yn,cu as Wr,cv as Dr,aw as Nr,cw as Ur,cx as qr,cy as Fr,aZ as Vr,a2 as Hr,cz as Br,cA as Kr,cB as bn,cC as At,cD as Gr,aC as wn,cE as Qr,af as xn,a_ as Pn,aG as Xr,cF as Jr,cG as Yr,cH as Zr,cI as es,cJ as ts,cK as ns,cL as rs,cM as ss}from"./sanity-DyhyTRlS.js";import{i as as,D as os}from"./DisplayedDocumentBroadcaster-CaxBbJvr.js";function is(n,e){return e===void 0&&(e=null),e=e??n,Un(function(t,a){var r=[],s=0;t.subscribe(qn(a,function(o){var i,l,c,p,d=null;s++%e===0&&r.push([]);try{for(var h=it(r),m=h.next();!m.done;m=h.next()){var g=m.value;g.push(o),n<=g.length&&(d=d??[],d.push(g))}}catch(y){i={error:y}}finally{try{m&&!m.done&&(l=h.return)&&l.call(h)}finally{if(i)throw i.error}}if(d)try{for(var b=it(d),v=b.next();!v.done;v=b.next()){var g=v.value;Fn(r,g),a.next(g)}}catch(y){c={error:y}}finally{try{v&&!v.done&&(p=b.return)&&p.call(b)}finally{if(c)throw c.error}}},function(){var o,i;try{for(var l=it(r),c=l.next();!c.done;c=l.next()){var p=c.value;a.next(p)}}catch(d){o={error:d}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(o)throw o.error}}a.complete()},void 0,function(){r=null}))})}function cs({children:n,isValidProp:e,...t}){e&&Hn(e),t={...f.useContext(Ut),...t},t.isStatic=Vn(()=>t.isStatic);const a=f.useMemo(()=>t,[JSON.stringify(t.transition),t.transformPagePoint,t.reducedMotion]);return u.jsx(Ut.Provider,{value:a,children:n})}const te=[];for(let n=0;n<256;++n)te.push((n+256).toString(16).slice(1));function ls(n,e=0){return(te[n[e+0]]+te[n[e+1]]+te[n[e+2]]+te[n[e+3]]+"-"+te[n[e+4]]+te[n[e+5]]+"-"+te[n[e+6]]+te[n[e+7]]+"-"+te[n[e+8]]+te[n[e+9]]+"-"+te[n[e+10]]+te[n[e+11]]+te[n[e+12]]+te[n[e+13]]+te[n[e+14]]+te[n[e+15]]).toLowerCase()}let ut;const us=new Uint8Array(16);function ds(){if(!ut){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ut=crypto.getRandomValues.bind(crypto)}return ut(us)}const ps=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Vt={randomUUID:ps};function We(n,e,t){var r;if(Vt.randomUUID&&!n)return Vt.randomUUID();n=n||{};const a=n.random??((r=n.rng)==null?void 0:r.call(n))??ds();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=a[6]&15|64,a[8]=a[8]&63|128,ls(a)}const Ht=n=>({context:e})=>{const{count:t,include:a,exclude:r,responseType:s="message.received"}=n;return{count:t,domain:e.domain,from:e.connectTo,include:a?Array.isArray(a)?a:[a]:[],exclude:r?Array.isArray(r)?r:[r]:[],responseType:s,target:e.target,to:e.name}},ms=n=>e=>{const{data:t}=e;return(n.include.length?n.include.includes(t.type):!0)&&(n.exclude.length?!n.exclude.includes(t.type):!0)&&t.domain===n.domain&&t.from===n.from&&t.to===n.to&&(!n.target||e.source===n.target)},hs=n=>e=>({type:n,message:e}),fs=Gn(()=>bt(window,"message")),Sn=n=>nn(({input:e})=>fs.pipe(n?yt(n):lt(),rn(ms(e)),yt(hs(e.responseType)),e.count?lt(is(e.count),Qn(t=>t),Pt(e.count)):lt())),Mt="sanity/comlink",gs=3e3,vs=500,Ve="comlink/response",nt="comlink/heartbeat",$t="comlink/disconnect",Ot="comlink/handshake/syn",Lt="comlink/handshake/syn-ack",zt="comlink/handshake/ack",ys=n=>e=>e.pipe(Pt(1),yt(()=>{throw new Error(n)})),_n=()=>tn({actors:{listen:nn(({input:n})=>{const e=n.signal?bt(n.signal,"abort").pipe(ys(`Request ${n.requestId} aborted`)):Jn,t=a=>{var r,s;return((r=a.data)==null?void 0:r.type)===Ve&&((s=a.data)==null?void 0:s.responseTo)===n.requestId&&!!a.source&&n.sources.has(a.source)};return bt(window,"message").pipe(rn(t),Pt(n.sources.size),Yn(e))})},actions:{"send message":({context:n},e)=>{const{sources:t,targetOrigin:a}=n,{message:r}=e;t.forEach(s=>{s.postMessage(r,{targetOrigin:a})})},"on success":ct(({context:n})=>n.parentRef,({context:n,self:e})=>{var t;return n.response&&((t=n.resolvable)==null||t.resolve(n.response)),{type:"request.success",requestId:e.id,response:n.response,responseTo:n.responseTo}}),"on fail":ct(({context:n})=>n.parentRef,({context:n,self:e})=>{var t;return n.suppressWarnings||console.warn(`[@sanity/comlink] Received no response to message '${n.type}' on client '${n.from}' (ID: '${n.id}').`),(t=n.resolvable)==null||t.reject(new Error("No response received")),{type:"request.failed",requestId:e.id}}),"on abort":ct(({context:n})=>n.parentRef,({context:n,self:e})=>{var t;return(t=n.resolvable)==null||t.reject(new Error("Request aborted")),{type:"request.aborted",requestId:e.id}})},guards:{expectsResponse:({context:n})=>n.expectResponse},delays:{initialTimeout:0,responseTimeout:({context:n})=>n.responseTimeout??gs}}).createMachine({context:({input:n})=>({channelId:n.channelId,data:n.data,domain:n.domain,expectResponse:n.expectResponse??!1,from:n.from,id:`msg-${We()}`,parentRef:n.parentRef,resolvable:n.resolvable,response:null,responseTimeout:n.responseTimeout,responseTo:n.responseTo,signal:n.signal,sources:n.sources instanceof Set?n.sources:new Set([n.sources]),suppressWarnings:n.suppressWarnings,targetOrigin:n.targetOrigin,to:n.to,type:n.type}),initial:"idle",on:{abort:".aborted"},states:{idle:{after:{initialTimeout:[{target:"sending"}]}},sending:{entry:{type:"send message",params:({context:n})=>{const{channelId:e,data:t,domain:a,from:r,id:s,responseTo:o,to:i,type:l}=n;return{message:{channelId:e,data:t,domain:a,from:r,id:s,to:i,type:l,responseTo:o}}}},always:[{guard:"expectsResponse",target:"awaiting"},"success"]},awaiting:{invoke:{id:"listen for response",src:"listen",input:({context:n})=>({requestId:n.id,sources:n.sources,signal:n.signal}),onError:"aborted"},after:{responseTimeout:"failed"},on:{message:{actions:vt({response:({event:n})=>n.data.data,responseTo:({event:n})=>n.data.responseTo}),target:"success"}}},failed:{type:"final",entry:"on fail"},success:{type:"final",entry:"on success"},aborted:{type:"final",entry:"on abort"}},output:({context:n,self:e})=>({requestId:e.id,response:n.response,responseTo:n.responseTo})}),bs=Zn(({sendBack:n,input:e})=>{const t=()=>{n(e.event)};e.immediate&&t();const a=setInterval(t,e.interval);return()=>{clearInterval(a)}}),rt=()=>tn({actors:{requestMachine:_n(),listen:Sn(),sendBackAtInterval:bs},actions:{"buffer message":Xe(({enqueue:n})=>{n.assign({buffer:({event:e,context:t})=>(Ie(e,"post"),[...t.buffer,e.data])}),n.emit(({event:e})=>(Ie(e,"post"),{type:"buffer.added",message:e.data}))}),"create request":vt({requests:({context:n,event:e,self:t,spawn:a})=>{Ie(e,"request");const r=(Array.isArray(e.data)?e.data:[e.data]).map(s=>{const o=`req-${We()}`;return a("requestMachine",{id:o,input:{channelId:n.channelId,data:s.data,domain:n.domain,expectResponse:s.expectResponse,from:n.name,parentRef:t,responseTo:s.responseTo,sources:n.target,targetOrigin:n.targetOrigin,to:n.connectTo,type:s.type}})});return[...n.requests,...r]}}),"emit received message":Xe(({enqueue:n})=>{n.emit(({event:e})=>(Ie(e,"message.received"),{type:"message",message:e.message.data}))}),"emit status":Bn((n,e)=>({type:"status",status:e.status})),"post message":De(({event:n})=>(Ie(n,"post"),{type:"request",data:{data:n.data.data,expectResponse:!0,type:n.data.type}})),"remove request":Xe(({context:n,enqueue:e,event:t})=>{Ie(t,["request.success","request.failed","request.aborted"]),Xn(t.requestId),e.assign({requests:n.requests.filter(({id:a})=>a!==t.requestId)})}),respond:De(({event:n})=>(Ie(n,"response"),{type:"request",data:{data:n.data,type:Ve,responseTo:n.respondTo}})),"send handshake ack":De({type:"request",data:{type:zt}}),"send disconnect":De(()=>({type:"request",data:{type:$t}})),"send handshake syn":De({type:"request",data:{type:Ot}}),"send pending messages":Xe(({enqueue:n})=>{n.raise(({context:e})=>({type:"request",data:e.buffer.map(({data:t,type:a})=>({data:t,type:a}))})),n.emit(({context:e})=>({type:"buffer.flushed",messages:e.buffer})),n.assign({buffer:[]})}),"set target":vt({target:({event:n})=>(Ie(n,"target.set"),n.target)})},guards:{"has target":({context:n})=>!!n.target,"should send heartbeats":({context:n})=>n.heartbeat}}).createMachine({id:"connection",context:({input:n})=>({id:n.id||`${n.name}-${We()}`,buffer:[],channelId:`chn-${We()}`,connectTo:n.connectTo,domain:n.domain??Mt,heartbeat:n.heartbeat??!1,name:n.name,requests:[],target:n.target,targetOrigin:n.targetOrigin}),on:{"target.set":{actions:"set target"},"request.success":{actions:"remove request"},"request.failed":{actions:"remove request"}},initial:"idle",states:{idle:{entry:[{type:"emit status",params:{status:"idle"}}],on:{connect:{target:"handshaking",guard:"has target"},post:{actions:"buffer message"}}},handshaking:{id:"handshaking",entry:[{type:"emit status",params:{status:"handshaking"}}],invoke:[{id:"send syn",src:"sendBackAtInterval",input:()=>({event:{type:"syn"},interval:vs,immediate:!0})},{id:"listen for handshake",src:"listen",input:n=>Ht({include:Lt,count:1})(n)}],on:{syn:{actions:"send handshake syn"},request:{actions:"create request"},post:{actions:"buffer message"},"message.received":{target:"connected"},disconnect:{target:"disconnected"}},exit:"send handshake ack"},connected:{entry:["send pending messages",{type:"emit status",params:{status:"connected"}}],invoke:{id:"listen for messages",src:"listen",input:Ht({exclude:[Ve,nt]})},on:{post:{actions:"post message"},request:{actions:"create request"},response:{actions:"respond"},"message.received":{actions:"emit received message"},disconnect:{target:"disconnected"}},initial:"heartbeat",states:{heartbeat:{initial:"checking",states:{checking:{always:{guard:"should send heartbeats",target:"sending"}},sending:{on:{"request.failed":{target:"#handshaking"}},invoke:{id:"send heartbeat",src:"sendBackAtInterval",input:()=>({event:{type:"post",data:{type:nt,data:void 0}},interval:2e3,immediate:!1})}}}}}},disconnected:{id:"disconnected",entry:["send disconnect",{type:"emit status",params:{status:"disconnected"}}],on:{request:{actions:"create request"},post:{actions:"buffer message"},connect:{target:"handshaking",guard:"has target"}}}}}),dt=(n,e=rt())=>{const t=n.id||`${n.name}-${We()}`,a=Kn(e,{input:{...n,id:t}}),r=new Map,s=new Map,o=(g,b,v)=>{const y=r.get(g)||new Set;r.has(g)||r.set(g,y),y.add(b);const w=s.get(g);if(w){const _=(v==null?void 0:v.replay)??1;Array.from(w).slice(-_).forEach(async({data:x,id:E})=>{const R=await b(x);R&&a.send({type:"response",respondTo:E,data:R})}),s.delete(g)}return()=>{y.delete(b)}},i=()=>{a.send({type:"connect"})},l=()=>{a.send({type:"disconnect"})},c=(g,b)=>{const{unsubscribe:v}=a.on("status",y=>{b&&y.status!==b||g(y.status)});return v},p=g=>{a.send({type:"target.set",target:g})},d=(g,b)=>{const v={type:g,data:b};a.send({type:"post",data:v})};a.on("message",async({message:g})=>{const b=r.get(g.type);if(b){b.forEach(async y=>{const w=await y(g.data);w&&a.send({type:"response",respondTo:g.id,data:w})});return}const v=s.get(g.type);v?v.add(g):s.set(g.type,new Set([g]))});const h=()=>{a.stop()},m=()=>(a.start(),h);return{actor:a,connect:i,disconnect:l,id:t,name:n.name,machine:e,on:o,onStatus:c,post:d,setTarget:p,start:m,stop:h,get target(){return a.getSnapshot().context.target}}},pt=n=>{n.disconnect(),setTimeout(()=>{n.stop()},0)},ws=()=>{},xs=n=>{const{targetOrigin:e}=n,t=new Set,a=new Set;return{addTarget:r=>{if(t.has(r))return ws;if(!t.size||!a.size)return t.add(r),a.forEach(o=>{o.connections.forEach(i=>{i.setTarget(r),i.connect()})}),()=>{t.delete(r),a.forEach(o=>{o.connections.forEach(i=>{i.target===r&&i.disconnect()})})};t.add(r);const s=new Set;return a.forEach(o=>{const i=dt({...o.input,target:r,targetOrigin:e},o.machine);s.add(i),o.connections.add(i),o.subscribers.forEach(({type:l,handler:c,unsubscribers:p})=>{p.push(i.on(l,c))}),o.internalEventSubscribers.forEach(({type:l,handler:c,unsubscribers:p})=>{p.push(i.actor.on(l,c).unsubscribe)}),o.statusSubscribers.forEach(({handler:l,unsubscribers:c})=>{c.push(i.onStatus(p=>l({connection:i.id,status:p})))}),i.start(),i.connect()}),()=>{t.delete(r),s.forEach(o=>{pt(o),a.forEach(i=>{i.connections.delete(o)})})}},createChannel:(r,s=rt())=>{const o={connections:new Set,input:r,internalEventSubscribers:new Set,machine:s,statusSubscribers:new Set,subscribers:new Set};a.add(o);const{connections:i,internalEventSubscribers:l,statusSubscribers:c,subscribers:p}=o;if(t.size)t.forEach(v=>{const y=dt({...r,target:v,targetOrigin:e},s);i.add(y)});else{const v=dt({...r,targetOrigin:e},s);i.add(v)}const d=(...v)=>{const[y,w]=v;i.forEach(_=>{_.post(y,w)})},h=(v,y)=>{const w=[];i.forEach(x=>{w.push(x.on(v,y))});const _={type:v,handler:y,unsubscribers:w};return p.add(_),()=>{w.forEach(x=>x()),p.delete(_)}},m=(v,y)=>{const w=[];i.forEach(x=>{w.push(x.actor.on(v,y).unsubscribe)});const _={type:v,handler:y,unsubscribers:w};return l.add(_),()=>{w.forEach(x=>x()),l.delete(_)}},g=v=>{const y=[];i.forEach(_=>{y.push(_.onStatus(x=>v({connection:_.id,status:x})))});const w={handler:v,unsubscribers:y};return c.add(w),()=>{y.forEach(_=>_()),c.delete(w)}},b=()=>{const v=o.connections;v.forEach(pt),v.clear(),a.delete(o)};return{on:h,onInternalEvent:m,onStatus:g,post:d,start:()=>(i.forEach(v=>{v.start(),v.connect()}),b),stop:b}},destroy:()=>{a.forEach(({connections:r})=>{r.forEach(pt),r.clear()}),a.clear(),t.clear()}}},Ps={"handshake/syn":Ot,"handshake/syn-ack":Lt,"handshake/ack":zt,"channel/response":Ve,"channel/heartbeat":nt,"channel/disconnect":$t,"overlay/focus":"visual-editing/focus","overlay/navigate":"visual-editing/navigate","overlay/toggle":"visual-editing/toggle","presentation/toggleOverlay":"presentation/toggle-overlay"},Ss={[Ot]:"handshake/syn",[Lt]:"handshake/syn-ack",[zt]:"handshake/ack",[Ve]:"channel/response",[nt]:"channel/heartbeat",[$t]:"channel/disconnect","visual-editing/focus":"overlay/focus","visual-editing/navigate":"overlay/navigate","visual-editing/toggle":"overlay/toggle","presentation/toggle-overlay":"presentation/toggleOverlay"},_s=n=>{const{data:e}=n;return e&&typeof e=="object"&&"domain"in e&&"type"in e&&"from"in e&&"to"in e&&(e.domain==="sanity/channels"&&(e.domain=Mt),e.to==="overlays"&&(e.to="visual-editing"),e.from==="overlays"&&(e.from="visual-editing"),e.channelId=e.connectionId,delete e.connectionId,e.type=Ps[e.type]??e.type),n},js=n=>{const{channelId:e,...t}=n,a={...t,connectionId:e};return a.domain===Mt&&(a.domain="sanity/channels"),a.to==="visual-editing"&&(a.to="overlays"),a.from==="visual-editing"&&(a.from="overlays"),a.type=Ss[a.type]??a.type,a.type==="channel/response"&&a.responseTo&&!a.data&&(a.data={responseTo:a.responseTo}),(a.type==="handshake/syn"||a.type==="handshake/syn-ack"||a.type==="handshake/ack")&&(a.data={id:a.connectionId}),a},Es=({context:n},e)=>{const{sources:t,targetOrigin:a}=n,r=js(e.message);t.forEach(s=>{s.postMessage(r,{targetOrigin:a})})},Bt=()=>({listen:Sn(_s),requestMachine:_n().provide({actions:{"send message":Es}})});function Cs(n){const e=new URL(n),{searchParams:t}=e;return t.delete(St),t.delete(_t),t.delete(Fe),t.delete(Ne),t.delete(jt),e}function Rs(n,e,t,a){const r=new URL(n),{searchParams:s}=r;return e&&(s.set(_t,e),s.set(St,t)),s.set(Fe,a),r}function jn(){if(typeof crypto<"u"){const n=new Uint8Array(16);crypto.getRandomValues(n);let e="";for(let t=0;t<n.length;t++)e+=n[t].toString(16).padStart(2,"0");return e=btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/[=]+$/,""),e}return Math.random().toString(36).slice(2)}async function Ts(n,e,t,a){const r=n.withConfig({apiVersion:Et}),s=jn(),o=r.patch($e).set({secret:s,studioUrl:t,userId:a});return await r.transaction().createIfNotExists({_id:$e,_type:Ue,source:e,studioUrl:t,userId:a}).patch(o).commit({tag:Ct}),{secret:s}}async function Is(n,e,t,a){const r=n.withConfig({apiVersion:Et}),s=r.patch($e).set({secret:null,studioUrl:t,userId:a});await r.transaction().createIfNotExists({_id:$e,_type:Ue,source:e,studioUrl:t,userId:a}).patch(s).commit({tag:Ct})}function ks(n){for(var e=[],t=0;t<n.length;){var a=n[t];if(a==="*"||a==="+"||a==="?"){e.push({type:"MODIFIER",index:t,value:n[t++]});continue}if(a==="\\"){e.push({type:"ESCAPED_CHAR",index:t++,value:n[t++]});continue}if(a==="{"){e.push({type:"OPEN",index:t,value:n[t++]});continue}if(a==="}"){e.push({type:"CLOSE",index:t,value:n[t++]});continue}if(a===":"){for(var r="",s=t+1;s<n.length;){var o=n.charCodeAt(s);if(o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122||o===95){r+=n[s++];continue}break}if(!r)throw new TypeError("Missing parameter name at ".concat(t));e.push({type:"NAME",index:t,value:r}),t=s;continue}if(a==="("){var i=1,l="",s=t+1;if(n[s]==="?")throw new TypeError('Pattern cannot start with "?" at '.concat(s));for(;s<n.length;){if(n[s]==="\\"){l+=n[s++]+n[s++];continue}if(n[s]===")"){if(i--,i===0){s++;break}}else if(n[s]==="("&&(i++,n[s+1]!=="?"))throw new TypeError("Capturing groups are not allowed at ".concat(s));l+=n[s++]}if(i)throw new TypeError("Unbalanced pattern at ".concat(t));if(!l)throw new TypeError("Missing pattern at ".concat(t));e.push({type:"PATTERN",index:t,value:l}),t=s;continue}e.push({type:"CHAR",index:t,value:n[t++]})}return e.push({type:"END",index:t,value:""}),e}function As(n,e){e===void 0&&(e={});for(var t=ks(n),a=e.prefixes,r=a===void 0?"./":a,s=e.delimiter,o=s===void 0?"/#?":s,i=[],l=0,c=0,p="",d=function(P){if(c<t.length&&t[c].type===P)return t[c++].value},h=function(P){var j=d(P);if(j!==void 0)return j;var T=t[c],A=T.type,k=T.index;throw new TypeError("Unexpected ".concat(A," at ").concat(k,", expected ").concat(P))},m=function(){for(var P="",j;j=d("CHAR")||d("ESCAPED_CHAR");)P+=j;return P},g=function(P){for(var j=0,T=o;j<T.length;j++){var A=T[j];if(P.indexOf(A)>-1)return!0}return!1},b=function(P){var j=i[i.length-1],T=P||(j&&typeof j=="string"?j:"");if(j&&!T)throw new TypeError('Must have text between two parameters, missing text after "'.concat(j.name,'"'));return!T||g(T)?"[^".concat(ke(o),"]+?"):"(?:(?!".concat(ke(T),")[^").concat(ke(o),"])+?")};c<t.length;){var v=d("CHAR"),y=d("NAME"),w=d("PATTERN");if(y||w){var _=v||"";r.indexOf(_)===-1&&(p+=_,_=""),p&&(i.push(p),p=""),i.push({name:y||l++,prefix:_,suffix:"",pattern:w||b(_),modifier:d("MODIFIER")||""});continue}var x=v||d("ESCAPED_CHAR");if(x){p+=x;continue}p&&(i.push(p),p="");var E=d("OPEN");if(E){var _=m(),R=d("NAME")||"",S=d("PATTERN")||"",I=m();h("CLOSE"),i.push({name:R||(S?l++:""),pattern:R&&!S?b(_):S,prefix:_,suffix:I,modifier:d("MODIFIER")||""});continue}h("END")}return i}function Ms(n,e){var t=[],a=Cn(n,t,e);return $s(a,t,e)}function $s(n,e,t){t===void 0&&(t={});var a=t.decode,r=a===void 0?function(s){return s}:a;return function(s){var o=n.exec(s);if(!o)return!1;for(var i=o[0],l=o.index,c=Object.create(null),p=function(h){if(o[h]===void 0)return"continue";var m=e[h-1];m.modifier==="*"||m.modifier==="+"?c[m.name]=o[h].split(m.prefix+m.suffix).map(function(g){return r(g,m)}):c[m.name]=r(o[h],m)},d=1;d<o.length;d++)p(d);return{path:i,index:l,params:c}}}function ke(n){return n.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function En(n){return n&&n.sensitive?"":"i"}function Os(n,e){if(!e)return n;for(var t=/\((?:\?<(.*?)>)?(?!\?)/g,a=0,r=t.exec(n.source);r;)e.push({name:r[1]||a++,prefix:"",suffix:"",modifier:"",pattern:""}),r=t.exec(n.source);return n}function Ls(n,e,t){var a=n.map(function(r){return Cn(r,e,t).source});return new RegExp("(?:".concat(a.join("|"),")"),En(t))}function zs(n,e,t){return Ws(As(n,t),e,t)}function Ws(n,e,t){t===void 0&&(t={});for(var a=t.strict,r=a===void 0?!1:a,s=t.start,o=s===void 0?!0:s,i=t.end,l=i===void 0?!0:i,c=t.encode,p=c===void 0?function(j){return j}:c,d=t.delimiter,h=d===void 0?"/#?":d,m=t.endsWith,g=m===void 0?"":m,b="[".concat(ke(g),"]|$"),v="[".concat(ke(h),"]"),y=o?"^":"",w=0,_=n;w<_.length;w++){var x=_[w];if(typeof x=="string")y+=ke(p(x));else{var E=ke(p(x.prefix)),R=ke(p(x.suffix));if(x.pattern)if(e&&e.push(x),E||R)if(x.modifier==="+"||x.modifier==="*"){var S=x.modifier==="*"?"?":"";y+="(?:".concat(E,"((?:").concat(x.pattern,")(?:").concat(R).concat(E,"(?:").concat(x.pattern,"))*)").concat(R,")").concat(S)}else y+="(?:".concat(E,"(").concat(x.pattern,")").concat(R,")").concat(x.modifier);else{if(x.modifier==="+"||x.modifier==="*")throw new TypeError('Can not repeat "'.concat(x.name,'" without a prefix and suffix'));y+="(".concat(x.pattern,")").concat(x.modifier)}else y+="(?:".concat(E).concat(R,")").concat(x.modifier)}}if(l)r||(y+="".concat(v,"?")),y+=t.endsWith?"(?=".concat(b,")"):"$";else{var I=n[n.length-1],P=typeof I=="string"?v.indexOf(I[I.length-1])>-1:I===void 0;r||(y+="(?:".concat(v,"(?=").concat(b,"))?")),P||(y+="(?=".concat(v,"|").concat(b,")"))}return new RegExp(y,En(t))}function Cn(n,e,t){return n instanceof RegExp?Os(n,e):Array.isArray(n)?Ls(n,e,t):zs(n,e,t)}async function Ds(n,e,t,a,r=sn()){const s=n.withConfig({apiVersion:Et});try{const o=new Date(Date.now()+1e3*er),i=`drafts.${r}`,l=jn(),c=s.patch(i).set({secret:l,source:e,studioUrl:t,userId:a});return await s.transaction().createOrReplace({_id:i,_type:an}).patch(c).commit({tag:Ct}),{secret:l,expiresAt:o}}finally{try{await s.delete({query:tr})}catch(o){console.error("Failed to delete expired secrets",o)}}}function Ns(n){const{draftMode:e,previewMode:t,origin:a=typeof location>"u"?"https://localhost":location.origin}=n,r=(t==null?void 0:t.enable)||(e==null?void 0:e.enable);let{preview:s="/"}=n;const o=new URL(s,a),i=r?new URL(r,a):void 0;return async l=>{try{if(l.previewSearchParam){const p=new URL(l.previewSearchParam,o);p.origin===o.origin&&(s=`${p.pathname}${p.search}`)}}catch{}typeof location<"u"&&location.origin===o.origin&&l.studioBasePath&&(s.startsWith(`${l.studioBasePath}/`)||s===l.studioBasePath)&&(s=n.preview||"/");const c=new URL(s,o);if(i){const p=new URL(i),{searchParams:d}=p;return d.set(_t,l.previewUrlSecret),d.set(Fe,l.studioPreviewPerspective),c.pathname!==p.pathname&&d.set(St,`${c.pathname}${c.search}`),p.toString()}return c.toString()}}const Us=n=>typeof n=="object"&&typeof n.then=="function",Je=[];function qs(n,e,t=(a,r)=>a===r){if(n===e)return!0;if(!n||!e)return!1;const a=n.length;if(e.length!==a)return!1;for(let r=0;r<a;r++)if(!t(n[r],e[r]))return!1;return!0}function Fs(n,e=null,t=!1,a={}){e===null&&(e=[n]);for(const s of Je)if(qs(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return a.lifespan&&a.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,a.lifespan)),s.response;if(!t)throw s.promise}const r={keys:e,equal:a.equal,remove:()=>{const s=Je.indexOf(r);s!==-1&&Je.splice(s,1)},promise:(Us(n)?n:n(...e)).then(s=>{r.response=s,a.lifespan&&a.lifespan>0&&(r.timeout=setTimeout(r.remove,a.lifespan))}).catch(s=>r.error=s)};if(Je.push(r),!t)throw r.promise}const Rn=(n,e,t)=>Fs(n,e,!1,t);function Vs(n,e){let t=new AbortController,a=[];async function r(o,i){const{result:l,syncTags:c}=await n.fetch(nr,{},{filterResponse:!1,lastLiveEventId:o,tag:"preview-url-secret.fetch-vercel-bypass-protection-secret"});Array.isArray(c)&&(a=c),i.aborted||e(l)}const s=n.live.events().subscribe({next:o=>{o.type==="message"&&(t.abort(),t=new AbortController,o.tags.some(i=>a.includes(i))&&r(o.id,t.signal))},error:o=>console.error(o)});return r(null,t.signal),()=>{s.unsubscribe(),t.abort()}}const Hs=n=>{const e=L.c(3),{comlink:t}=n;let a,r;return e[0]!==t?(a=()=>t.on("visual-editing/features",Ks),r=[t],e[0]=t,e[1]=a,e[2]=r):(a=e[1],r=e[2]),f.useEffect(a,r),null};var Bs=f.memo(Hs);function Ks(){return{features:{optimistic:!0}}}function Tn(n,e){let t;return(...a)=>{clearTimeout(t),t=setTimeout(()=>{n.apply(n,a)},e)}}const Gs=function(n){const e=L.c(14),{comlink:t,children:a}=n;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r={},e[0]=r):r=e[0];const s=f.useRef(r);let o,i;e[1]!==t?(o=()=>t==null?void 0:t.on("visual-editing/shared-state",()=>({state:s.current})),i=[t],e[1]=t,e[2]=o,e[3]=i):(o=e[2],i=e[3]),f.useEffect(o,i);let l;e[4]!==t?(l=(v,y)=>{s.current[v]=y,t==null||t.post("presentation/shared-state",{key:v,value:y})},e[4]=t,e[5]=l):l=e[5];const c=l;let p;e[6]!==t?(p=v=>{t==null||t.post("presentation/shared-state",{key:v}),delete s.current[v]},e[6]=t,e[7]=p):p=e[7];const d=p;let h,m;e[8]!==d||e[9]!==c?(m={removeValue:d,setValue:c},e[8]=d,e[9]=c,e[10]=m):m=e[10],h=m;const g=h;let b;return e[11]!==a||e[12]!==g?(b=u.jsx(br.Provider,{value:g,children:a}),e[11]=a,e[12]=g,e[13]=b):b=e[13],b},Qs=pe.div`
  overflow: hidden;
  flex-basis: 0;
  flex-shrink: 1;
`,Wt=function(n){const e=L.c(15),{children:t,defaultSize:a,id:r,minWidth:s,maxWidth:o,order:i}=n,l=a===void 0?null:a,c=i===void 0?0:i,p=f.useContext(Tt);if(p===null)throw Error("Panel components must be rendered within a PanelGroup container");const{getPanelStyle:d,registerElement:h,unregisterElement:m}=p;let g;e[0]!==d||e[1]!==r?(g=d(r),e[0]=d,e[1]=r,e[2]=g):g=e[2];const b=g;let v,y;e[3]!==l||e[4]!==r||e[5]!==o||e[6]!==s||e[7]!==c||e[8]!==h||e[9]!==m?(v=()=>(h(r,{id:r,type:"panel",defaultSize:l,maxWidth:o??null,minWidth:s??0,order:c}),()=>{m(r)}),y=[r,l,c,o,s,h,m],e[3]=l,e[4]=r,e[5]=o,e[6]=s,e[7]=c,e[8]=h,e[9]=m,e[10]=v,e[11]=y):(v=e[10],y=e[11]),f.useLayoutEffect(v,y);let w;return e[12]!==t||e[13]!==b?(w=u.jsx(Qs,{style:b,children:t}),e[12]=t,e[13]=b,e[14]=w):w=e[14],w},In="presentation/panels",kn=()=>JSON.parse(localStorage.getItem(In)||"{}"),Xs=n=>{localStorage.setItem(In,JSON.stringify(n))},An=n=>n.map(e=>[e.id,e.order].join(":")).join(",");function Js(){const n=L.c(1);let e;const t=Zs,a=Ys;let r;if(n[0]===Symbol.for("react.memo_cache_sentinel")){const s=Tn(a,100);r={get:t,set:a,setDebounced:s},n[0]=r}else r=n[0];return e=r,e}function Ys(n,e){const t=kn(),a=An(n),r={...t,[a]:e};Xs(r)}function Zs(n){const e=kn(),t=An(n);return Array.isArray(e[t])&&e[t].some(ea)?void 0:e[t]}function ea(n){return n===null}function wt(n,e,t){const{maxWidth:a,minWidth:r}=n,s=a==null?100:a/t*100,o=r/t*100;return Math.min(s,Math.max(o,e))}function ta(n,e,t,a,r,s){const{panels:o,widths:i}=r,{widths:l}=s,c=l||i,p=[...c];{const g=n<0?a:t,b=o.findIndex(w=>w.id===g.id),v=c[b],y=wt(g,v+Math.abs(n),e);if(v===y)return c;n=n<0?v-y:y-v}let d=0,h=n<0?t:a,m=o.findIndex(g=>g.id===h.id);for(;;){const g=o[m],b=c[m],v=Math.abs(n)-Math.abs(d),y=wt(g,b-v,e);if(b!==y&&(d+=b-y,p[m]=y,d.toPrecision(10).localeCompare(Math.abs(n).toPrecision(10),void 0,{numeric:!0})>=0))break;if(n<0){if(--m<0)break}else if(++m>=o.length)break}return d===0?c:(h=n<0?a:t,m=o.findIndex(g=>g.id===h.id),p[m]=c[m]+d,p)}function na(n,e,t){if(n.length===1)return"100";const a=n.findIndex(s=>s.id===e),r=t[a];return r==null?"0":r.toPrecision(10)}function Kt(n,e,t=0,a=null){const r=n.clientX,s=(a||e.getBoundingClientRect()).left;return r-s-t}function mt(n){return n.type==="panel"}function Gt(n){return n.type==="resizer"}function Qt(n){return Array.from(n.values()).sort(({order:e},{order:t})=>e==null&&t==null?0:e==null?-1:t==null?1:e-t)}function Xt(n,e,t){const a=e.reduce((o,i)=>o+i,0),r=[...e].map(o=>o/a*100);let s=0;for(let o=0;o<n.length;o++){const i=n[o],l=r[o],c=wt(i,l,t);l!=c&&(s+=l-c,r[o]=c)}if(s.toFixed(3)!=="0.000")for(let o=0;o<n.length;o++){const i=n[o];let{maxWidth:l,minWidth:c}=i;c=c/t*100,l!=null&&(l=l/t*100);const p=Math.min(l??100,Math.max(c,r[o]+s));if(p!==r[o]&&(s-=p-r[o],r[o]=p,Math.abs(s).toFixed(3)==="0.000"))break}return r}function ra(n){let e=n.length,t=100;const a=n.map(s=>s.defaultSize?(t-=s.defaultSize,e-=1,s.defaultSize):null),r=t/e;return a.map(s=>s===null?r:s)}const sa=pe.div`
  display: flex;
  flex-direction: row;
  height: 100%;
  overflow: hidden;
  width: 100%;
`,aa=function(n){const e=L.c(46),{children:t}=n,a=f.useRef(null);let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=new Map,e[0]=r):r=e[0];const[s,o]=f.useState(r);let i,l;e[1]!==s?(l=Qt(s).filter(mt),e[1]=s,e[2]=l):l=e[2],i=l;const c=i;let p;e[3]===Symbol.for("react.memo_cache_sentinel")?(p=[],e[3]=p):p=e[3];const[d,h]=f.useState(p),[m,g]=f.useState(null);let b;e[4]!==s||e[5]!==c||e[6]!==d?(b={elements:s,panels:c,widths:d},e[4]=s,e[5]=c,e[6]=d,e[7]=b):b=e[7];const v=f.useRef(b);let y;e[8]!==m||e[9]!==c||e[10]!==d?(y=H=>({flexGrow:na(c,H,d),pointerEvents:m===null?void 0:"none"}),e[8]=m,e[9]=c,e[10]=d,e[11]=y):y=e[11];const w=y;let _;e[12]===Symbol.for("react.memo_cache_sentinel")?(_=(H,F)=>{o(B=>{if(B.has(H))return B;const K=new Map(B);return K.set(H,F),K})},e[12]=_):_=e[12];const x=_;let E;e[13]===Symbol.for("react.memo_cache_sentinel")?(E=H=>{o(F=>{if(!F.has(H))return F;const B=new Map(F);return B.delete(H),B})},e[13]=E):E=e[13];const R=E;let S;e[14]===Symbol.for("react.memo_cache_sentinel")?(S={containerWidth:window.innerWidth,dragOffset:0,panelAfter:null,panelBefore:null,resizerIndex:-1,resizerRect:null,startX:0,widths:[]},e[14]=S):S=e[14];const I=f.useRef(S);let P;e[15]!==s?(P=(H,F)=>{const B=Qt(s),K=B.findIndex(ee=>ee.id===H),se=s.get(H);if(!se||!Gt(se))return;const G=se.el.current;G&&(I.current={resizerIndex:K,panelBefore:B.reduce((ee,Y,ae)=>mt(Y)&&ae<K?Y:ee,null),panelAfter:B.reduce((ee,Y,ae)=>ee===null&&mt(Y)&&ae>K?Y:ee,null),containerWidth:window.innerWidth,startX:F.pageX,dragOffset:Kt(F,G),resizerRect:G.getBoundingClientRect(),widths:v.current.widths},g(H))},e[15]=s,e[16]=P):P=e[16];const j=P;let T;e[17]===Symbol.for("react.memo_cache_sentinel")?(T=()=>{g(null)},e[17]=T):T=e[17];const A=T;let k;e[18]!==s?(k=(H,F)=>{F.preventDefault(),F.stopPropagation();const{containerWidth:B,dragOffset:K,panelBefore:se,panelAfter:G,resizerRect:ee}=I.current;if(se==null||G==null)return;const Y=s.get(H);if(!Y||!Gt(Y))return;const ae=Y.el.current;if(!ae)return;const oe=Kt(F,ae,K,ee);if(oe===0)return;const{widths:he}=v.current,fe=a.current.getBoundingClientRect(),_e=oe/fe.width*100,me=ta(_e,B,se,G,v.current,I.current);he.some((je,ge)=>je!==me[ge])&&h(me)},e[18]=s,e[19]=k):k=e[19];const C=k;let M,D;e[20]!==s||e[21]!==c||e[22]!==d?(M=()=>{v.current.elements=s,v.current.panels=c,v.current.widths=d},D=[s,c,d],e[20]=s,e[21]=c,e[22]=d,e[23]=M,e[24]=D):(M=e[23],D=e[24]),f.useLayoutEffect(M,D);const O=Js();let z,N;e[25]!==c||e[26]!==O?(z=()=>{const{widths:H}=v.current;if(H.length===c.length)return;const F=O.get(c);if(F){const K=Xt(c,F,window.innerWidth);h(K);return}const B=ra(c);h(B)},N=[O,c],e[25]=c,e[26]=O,e[27]=z,e[28]=N):(z=e[27],N=e[28]),f.useLayoutEffect(z,N);let X,V;e[29]!==c||e[30]!==O||e[31]!==d?(X=()=>{d.length&&O.setDebounced(c,d)},V=[O,c,d],e[29]=c,e[30]=O,e[31]=d,e[32]=X,e[33]=V):(X=e[32],V=e[33]),f.useEffect(X,V);let J,re;e[34]===Symbol.for("react.memo_cache_sentinel")?(J=()=>{const H=new ResizeObserver(()=>{const{panels:F,widths:B}=v.current,K=Xt(F,B,window.innerWidth);B.some((se,G)=>se!==K[G])&&h(K)});return H.observe(a.current),()=>{H.disconnect()}},re=[],e[34]=J,e[35]=re):(J=e[34],re=e[35]),f.useLayoutEffect(J,re);let ie,W;e[36]!==m||e[37]!==C||e[38]!==w||e[39]!==j?(W={activeResizer:m,drag:C,getPanelStyle:w,registerElement:x,startDragging:j,stopDragging:A,unregisterElement:R},e[36]=m,e[37]=C,e[38]=w,e[39]=j,e[40]=W):W=e[40],ie=W;const Z=ie;let ce;e[41]!==t?(ce=u.jsx(sa,{ref:a,children:t}),e[41]=t,e[42]=ce):ce=e[42];let le;return e[43]!==Z||e[44]!==ce?(le=u.jsx(Tt.Provider,{value:Z,children:ce}),e[43]=Z,e[44]=ce,e[45]=le):le=e[45],le};function Dt(n){const e=L.c(37);let t,a,r,s,o;e[0]!==n?({children:t,message:a,onRetry:s,onContinueAnyway:r,...o}=n,e[0]=n,e[1]=t,e[2]=a,e[3]=r,e[4]=s,e[5]=o):(t=e[1],a=e[2],r=e[3],s=e[4],o=e[5]);const{t:i}=ve(ye);let l;e[6]!==i?(l=i("error-card.retry-button.text"),e[6]=i,e[7]=l):l=e[7];let c;e[8]!==s||e[9]!==l?(c=u.jsx(Se,{mode:"ghost",onClick:s,text:l}),e[8]=s,e[9]=l,e[10]=c):c=e[10];const p=c;let d;e[11]!==i?(d=i("error-card.continue-button.text"),e[11]=i,e[12]=d):d=e[12];let h;e[13]!==r||e[14]!==d?(h=u.jsx(Se,{mode:"ghost",tone:"critical",onClick:r,text:d}),e[13]=r,e[14]=d,e[15]=h):h=e[15];const m=h;let g;e[16]!==i?(g=i("error-card.title"),e[16]=i,e[17]=g):g=e[17];let b;e[18]!==g?(b=u.jsx(Q,{size:1,weight:"semibold",children:g}),e[18]=g,e[19]=b):b=e[19];let v;e[20]!==a?(v=u.jsx(Q,{muted:!0,size:1,children:a}),e[20]=a,e[21]=v):v=e[21];let y;e[22]!==b||e[23]!==v?(y=u.jsxs(Oe,{space:3,children:[b,v]}),e[22]=b,e[23]=v,e[24]=y):y=e[24];let w;e[25]!==m||e[26]!==r||e[27]!==s||e[28]!==p?(w=s&&r?u.jsxs(Cr,{space:2,children:[p,m]}):s?u.jsx(de,{children:p}):r?u.jsx(de,{children:m}):null,e[25]=m,e[26]=r,e[27]=s,e[28]=p,e[29]=w):w=e[29];let _;e[30]!==t||e[31]!==y||e[32]!==w?(_=u.jsx(ne,{align:"center",height:"fill",justify:"center",children:u.jsx(Rr,{padding:4,sizing:"border",width:0,children:u.jsxs(Oe,{space:4,children:[y,t,w]})})}),e[30]=t,e[31]=y,e[32]=w,e[33]=_):_=e[33];let x;return e[34]!==o||e[35]!==_?(x=u.jsx(ue,{height:"fill",...o,children:_}),e[34]=o,e[35]=_,e[36]=x):x=e[36],x}function oa(n={}){const e=Object.entries(n).map(([t,a])=>`${t}=${a}`).join("&");return e.length?`?${e}`:""}function ia(n){const e=["comment","inspect","instruction","pathKey","rev","since","template","view"],t=Object.entries(n).filter(([a])=>e.includes(a)).reduce((a,[r,s])=>s==null?a:{...a,[r]:s},{});return oa(t)}const ca=f.forwardRef(function(n,e){const t=L.c(11);let a,r;t[0]!==n?({searchParams:r,...a}=n,t[0]=n,t[1]=a,t[2]=r):(a=t[1],r=t[2]);let s;t[3]!==r?(s=Object.entries(r),t[3]=r,t[4]=s):s=t[4];let o;t[5]!==s?(o={type:void 0,_searchParams:s},t[5]=s,t[6]=o):o=t[6];let i;return t[7]!==e||t[8]!==a||t[9]!==o?(i=u.jsx(ot,{...a,ref:e,state:o,title:void 0}),t[7]=e,t[8]=a,t[9]=o,t[10]=i):i=t[10],i}),la=f.forwardRef(function(n,e){const t=L.c(15);let a,r,s,o;if(t[0]!==n){const{documentId:p,documentType:d,parentRefPath:h,template:m,searchParams:g,...b}=n;a=p,r=d,o=g,s=b,t[0]=n,t[1]=a,t[2]=r,t[3]=s,t[4]=o}else a=t[1],r=t[2],s=t[3],o=t[4];let i;t[5]!==o?(i=Object.entries(o),t[5]=o,t[6]=i):i=t[6];let l;t[7]!==a||t[8]!==r||t[9]!==i?(l={id:a,type:r,_searchParams:i},t[7]=a,t[8]=r,t[9]=i,t[10]=l):l=t[10];let c;return t[11]!==e||t[12]!==s||t[13]!==l?(c=u.jsx(ot,{...s,ref:e,state:l,title:void 0}),t[11]=e,t[12]=s,t[13]=l,t[14]=c):c=t[14],c});function Mn(n){const e=L.c(26),{children:t,onStructureParams:a,structureParams:r,searchParams:s,refs:o}=n,{state:i,resolvePathFromState:l}=Rt();let c;e[0]!==i._searchParams?(c=Object.fromEntries(i._searchParams||[]),e[0]=i._searchParams,e[1]=c):c=e[1];const p=ln(c);let d;e[2]!==l||e[3]!==p||e[4]!==i?(d=I=>{const P=l(i),j=ia({...p,...I});return`${P}${j}`},e[2]=l,e[3]=p,e[4]=i,e[5]=d):d=e[5];const h=d;let m,g;e[6]===Symbol.for("react.memo_cache_sentinel")?(g={},e[6]=g):g=e[6];const b=r;let v;e[7]===Symbol.for("react.memo_cache_sentinel")?(v=[],e[7]=v):v=e[7];let y;e[8]!==o||e[9]!==s?(y=I=>{const{childId:P,...j}=I,T=o==null?void 0:o.find(A=>A._id===P||at(A._id)===P);return T?u.jsx(ot,{...j,state:{id:P,type:T._type,_searchParams:Object.entries(s)}}):u.jsx("div",{...j})},e[8]=o,e[9]=s,e[10]=y):y=e[10];let w,_;e[11]!==s?(w=I=>u.jsx(ca,{...I,searchParams:s}),_=I=>u.jsx(la,{...I,searchParams:s}),e[11]=s,e[12]=w,e[13]=_):(w=e[12],_=e[13]);let x;e[14]!==a?(x=I=>{a({...I,inspect:I.inspect??void 0})},e[14]=a,e[15]=x):x=e[15];let E;e[16]!==h||e[17]!==b||e[18]!==y||e[19]!==w||e[20]!==_||e[21]!==x?(E={index:0,groupIndex:0,siblingIndex:0,payload:g,params:b,hasGroupSiblings:!1,groupLength:1,routerPanesState:v,ChildLink:y,BackLink:w,ReferenceChildLink:_,ParameterizedLink:ya,closeCurrentAndAfter:va,handleEditReference:ga,replaceCurrent:fa,closeCurrent:ha,duplicateCurrent:ma,setView:pa,setParams:x,setPayload:da,navigateIntent:ua,createPathWithParams:h},e[16]=h,e[17]=b,e[18]=y,e[19]=w,e[20]=_,e[21]=x,e[22]=E):E=e[22],m=E;const R=m;let S;return e[23]!==t||e[24]!==R?(S=u.jsx(Xr.Provider,{value:R,children:t}),e[23]=t,e[24]=R,e[25]=S):S=e[25],S}function ua(n,e,t){console.warn("navigateIntent",n,e,t)}function da(n){console.warn("setPayload",n)}function pa(n){console.warn("setView",n)}function ma(n){console.warn("duplicateCurrent",n)}function ha(){console.warn("closeCurrent")}function fa(n){console.warn("replaceCurrent",n)}function ga(n){console.warn("handleEditReference",n)}function va(){console.warn("closeCurrentAndAfter")}function ya(){throw new Error("ParameterizedLink not implemented")}const ba=pe(Pn)`
  height: 100%;
`,wa=pe(ne)`
  & > div {
    min-width: none !important;
    max-width: none !important;
  }
`,xa=pe(tt)`
  white-space: pre-wrap;
`;function Pa(n){var P,j,T,A;const e=L.c(33),{mainDocumentState:t,onStructureParams:a,searchParams:r,refs:s}=n,{t:o}=ve(ye),{devMode:i}=It();let l,c;if(e[0]!==((P=t==null?void 0:t.document)==null?void 0:P._id)||e[1]!==s){let k;e[3]!==((j=t==null?void 0:t.document)==null?void 0:j._id)?(k=C=>{var M;return at(C._id)!==((M=t==null?void 0:t.document)==null?void 0:M._id)},e[3]=(T=t==null?void 0:t.document)==null?void 0:T._id,e[4]=k):k=e[4],c=s.filter(k).map(_a),e[0]=(A=t==null?void 0:t.document)==null?void 0:A._id,e[1]=s,e[2]=c}else c=e[2];l=c;const p=l;let d,h;e[5]!==p?(h={filter:"_id in $ids",params:{ids:p}},e[5]=p,e[6]=h):h=e[6];let m;e[7]!==o?(m=o("document-list-pane.document-list.title"),e[7]=o,e[8]=m):m=e[8];let g;e[9]!==h||e[10]!==m?(g={id:"$root",options:h,schemaTypeName:"",title:m,type:"documentList"},e[9]=h,e[10]=m,e[11]=g):g=e[11],d=g;const b=d,[v,y]=f.useState(null);let w;e[12]===Symbol.for("react.memo_cache_sentinel")?(w=()=>y(null),e[12]=w):w=e[12];const _=w,[x]=f.useState(Sa);let E;e[13]===Symbol.for("react.memo_cache_sentinel")?(E=()=>y(null),e[13]=E):E=e[13];let R;if(e[14]!==s?(R=[s],e[14]=s,e[15]=R):R=e[15],f.useEffect(E,R),v){let k;e[16]!==o?(k=o("document-list-pane.error.text"),e[16]=o,e[17]=k):k=e[17];let C;e[18]!==i||e[19]!==v||e[20]!==o?(C=i&&u.jsx(ue,{overflow:"auto",padding:3,radius:2,tone:"critical",children:u.jsxs(Oe,{space:3,children:[u.jsx(et,{muted:!0,size:0,children:o("presentation-error.label")}),u.jsx(xa,{size:1,children:v.error.message})]})}),e[18]=i,e[19]=v,e[20]=o,e[21]=C):C=e[21];let M;return e[22]!==C||e[23]!==k?(M=u.jsx(Dt,{flex:1,message:k,onRetry:_,children:C}),e[22]=C,e[23]=k,e[24]=M):M=e[24],M}let S;e[25]!==b?(S=u.jsx(wa,{direction:"column",flex:1,children:u.jsx(rs,{index:0,itemId:"$root",pane:b,paneKey:"$root"})}),e[25]=b,e[26]=S):S=e[26];let I;return e[27]!==a||e[28]!==s||e[29]!==r||e[30]!==x||e[31]!==S?(I=u.jsx(xn,{onCatch:y,children:u.jsx(ba,{children:u.jsx(wn,{children:u.jsx(Mn,{onStructureParams:a,structureParams:x,searchParams:r,refs:s,children:S})})})}),e[27]=a,e[28]=s,e[29]=r,e[30]=x,e[31]=S,e[32]=I):I=e[32],I}function Sa(){return{}}function _a(n){return at(n._id)}const ja=pe(tt)`
  white-space: pre-wrap;
`;function Ea(n){const e=L.c(35),{documentId:t,documentType:a,onFocusPath:r,onStructureParams:s,searchParams:o,structureParams:i}=n,{template:l,templateParams:c}=i,{t:p}=ve(ye),{devMode:d}=It();let h,m;e[0]!==c?(m=Qr(c),e[0]=c,e[1]=m):m=e[1];let g;e[2]!==t||e[3]!==a||e[4]!==m||e[5]!==l?(g={id:t,type:a,template:l,templateParameters:m},e[2]=t,e[3]=a,e[4]=m,e[5]=l,e[6]=g):g=e[6];let b;e[7]!==t||e[8]!==g?(b={id:t,options:g,title:"",type:"document"},e[7]=t,e[8]=g,e[9]=b):b=e[9],h=b;const v=h,[y,w]=f.useState(null);let _;e[10]===Symbol.for("react.memo_cache_sentinel")?(_=()=>w(null),e[10]=_):_=e[10];const x=_;let E;e[11]===Symbol.for("react.memo_cache_sentinel")?(E=()=>{w(null)},e[11]=E):E=e[11];let R;if(e[12]!==t||e[13]!==a||e[14]!==i?(R=[t,a,i],e[12]=t,e[13]=a,e[14]=i,e[15]=R):R=e[15],f.useEffect(E,R),y){let T;e[16]!==p?(T=p("document-pane.error.text"),e[16]=p,e[17]=T):T=e[17];let A;e[18]!==d||e[19]!==y||e[20]!==p?(A=d&&u.jsx(ue,{overflow:"auto",padding:3,radius:2,tone:"critical",children:u.jsxs(Oe,{space:3,children:[u.jsx(et,{muted:!0,size:0,children:p("presentation-error.label")}),u.jsx(ja,{size:1,children:y.error.message})]})}),e[18]=d,e[19]=y,e[20]=p,e[21]=A):A=e[21];let k;return e[22]!==T||e[23]!==A?(k=u.jsx(Dt,{flex:1,message:T,onRetry:x,children:A}),e[22]=T,e[23]=A,e[24]=k):k=e[24],k}let S;e[25]===Symbol.for("react.memo_cache_sentinel")?(S={height:"100%"},e[25]=S):S=e[25];let I;e[26]===Symbol.for("react.memo_cache_sentinel")?(I=u.jsx(cn,{}),e[26]=I):I=e[26];let P;e[27]!==r||e[28]!==v?(P=u.jsx(f.Suspense,{fallback:I,children:u.jsx(Jr,{paneKey:"document",index:1,itemId:"document",pane:v,onFocusPath:r})}),e[27]=r,e[28]=v,e[29]=P):P=e[29];let j;return e[30]!==s||e[31]!==o||e[32]!==i||e[33]!==P?(j=u.jsx(xn,{onCatch:w,children:u.jsx(Pn,{style:S,children:u.jsx(Mn,{searchParams:o,onStructureParams:s,structureParams:i,children:P})})}),e[30]=s,e[31]=o,e[32]=i,e[33]=P,e[34]=j):j=e[34],j}function Ca(n){const e=L.c(7),{documentId:t,documentType:a,onFocusPath:r,onStructureParams:s,searchParams:o,structureParams:i}=n;let l;return e[0]!==t||e[1]!==a||e[2]!==r||e[3]!==s||e[4]!==o||e[5]!==i?(l=u.jsx(wn,{children:u.jsx(Ea,{documentId:t,documentType:a,onFocusPath:r,onStructureParams:s,searchParams:o,structureParams:i})}),e[0]=t,e[1]=a,e[2]=r,e[3]=s,e[4]=o,e[5]=i,e[6]=l):l=e[6],l}function Ra(n,e){const t=L.c(6),a=Gr();let r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r={},t[0]=r):r=t[0];const[s,o]=f.useState(r);let i,l;return t[1]!==n||t[2]!==a||t[3]!==e?(i=()=>{if(!e)return;const c=Yr(a,e,n).subscribe(p=>{o(p)});return()=>{c==null||c.unsubscribe()}},l=[a,e,n],t[1]=n,t[2]=a,t[3]=e,t[4]=i,t[5]=l):(i=t[4],l=t[5]),f.useEffect(i,l),s}function Ta(n){var S,I,P,j,T,A,k,C;const e=L.c(38),{documentId:t,documentType:a,mainDocumentState:r,onFocusPath:s,onStructureParams:o,refs:i,searchParams:l,structureParams:c}=n,{t:p}=ve(ye),d=Nr();let h;e[0]!==((S=r==null?void 0:r.document)==null?void 0:S._id)||e[1]!==((I=r==null?void 0:r.document)==null?void 0:I._type)||e[2]!==l?(h=M=>{var D,O;return u.jsx(ot,{...M,state:{id:(D=r==null?void 0:r.document)==null?void 0:D._id,type:(O=r==null?void 0:r.document)==null?void 0:O._type,_searchParams:Object.entries(l)}})},e[0]=(P=r==null?void 0:r.document)==null?void 0:P._id,e[1]=(j=r==null?void 0:r.document)==null?void 0:j._type,e[2]=l,e[3]=h):h=e[3];const m=h;let g,b;e[4]!==((T=r==null?void 0:r.document)==null?void 0:T._type)||e[5]!==d?(b=d.get(((A=r==null?void 0:r.document)==null?void 0:A._type)||"shoe"),e[4]=(k=r==null?void 0:r.document)==null?void 0:k._type,e[5]=d,e[6]=b):b=e[6],g=b;const v=g,y=Ra(((C=r==null?void 0:r.document)==null?void 0:C._id)||"",v);let w;e:{if(!(r!=null&&r.document)){w=null;break e}const M=r.document;let D;e[7]!==y.snapshot||e[8]!==M?(D=Ur({document:M,snapshot:y.snapshot}),e[7]=y.snapshot,e[8]=M,e[9]=D):D=e[9];let O;e[10]!==p?(O=p("main-document.label"),e[10]=p,e[11]=O):O=e[11];let z;e[12]!==O?(z=u.jsx(ue,{padding:1,radius:2,shadow:1,children:u.jsx(Q,{muted:!0,size:0,weight:"medium",children:O})}),e[12]=O,e[13]=z):z=e[13];let N;e[14]!==v||e[15]!==D||e[16]!==z?(N=u.jsx(qr,{...D,schemaType:v,status:z}),e[14]=v,e[15]=D,e[16]=z,e[17]=N):N=e[17],w=N}const _=w;if(t&&a){let M;return e[18]!==t||e[19]!==a||e[20]!==s||e[21]!==o||e[22]!==l||e[23]!==c?(M=u.jsx(Ca,{documentId:t,documentType:a,onFocusPath:s,onStructureParams:o,searchParams:l,structureParams:c}),e[18]=t,e[19]=a,e[20]=s,e[21]=o,e[22]=l,e[23]=c,e[24]=M):M=e[24],M}let x;e[25]!==m||e[26]!==r||e[27]!==_||e[28]!==p?(x=r&&u.jsx(ue,{padding:3,tone:r.document?"inherit":"caution",children:r.document?u.jsx(Fr,{__unstable_focusRing:!0,as:m,"data-as":"a",radius:2,sizing:"border",tone:"inherit",children:_}):u.jsx(ue,{padding:2,radius:2,tone:"inherit",children:u.jsxs(ne,{gap:3,children:[u.jsx(de,{flex:"none",children:u.jsx(Q,{size:1,children:u.jsx(Vr,{})})}),u.jsx(de,{flex:1,children:u.jsx(Q,{size:1,children:u.jsx(Hr,{t:p,i18nKey:"main-document.missing.text",components:{Code:"code"},values:{path:r.path}})})})]})})}),e[25]=m,e[26]=r,e[27]=_,e[28]=p,e[29]=x):x=e[29];let E;e[30]!==r||e[31]!==o||e[32]!==i||e[33]!==l?(E=u.jsx(Pa,{mainDocumentState:r,onStructureParams:o,searchParams:l,refs:i}),e[30]=r,e[31]=o,e[32]=i,e[33]=l,e[34]=E):E=e[34];let R;return e[35]!==x||e[36]!==E?(R=u.jsxs(ne,{direction:"column",flex:1,height:"fill",children:[x,E]}),e[35]=x,e[36]=E,e[37]=R):R=e[37],R}function Ia(n){const e=L.c(2);let t;e[0]!==n?(t=()=>n||We(),e[0]=n,e[1]=t):t=e[1];const[a]=f.useState(t);return a}const ka=pe.div`
  position: relative;
`,Aa=pe.div`
  position: absolute;
  top: 0;
  bottom: 0;
  left: -5px;
  width: 9px;
  z-index: 10;
  cursor: ${({$disabled:n})=>n?"auto":"ew-resize"};

  /* Border */
  & > span:nth-child(1) {
    display: block;
    border-left: 1px solid var(--card-border-color);
    position: absolute;
    top: 0;
    left: 4px;
    bottom: 0;
    transition: opacity 200ms;
  }

  ${({$disabled:n})=>!n&&`
    /* Hover effect */
    & > span:nth-child(2) {
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      width: 9px;
      bottom: 0;
      background-color: var(--card-border-color);
      opacity: 0;
      transition: opacity 150ms;
    }

    @media (hover: hover) {
      &:hover > span:nth-child(2) {
        opacity: 0.2;
      }
    }
  `}
`,$n=function(n){const e=L.c(27),{id:t,order:a,disabled:r}=n,s=r===void 0?!1:r,o=f.useRef(null),i=f.useContext(Tt);if(i===null)throw Error("Panel components must be rendered within a PanelGroup container");const l=Ia(t),{activeResizer:c,drag:p,startDragging:d,stopDragging:h,registerElement:m,unregisterElement:g}=i,b=c===l;if(i===null)throw Error("Panel components must be rendered within a PanelGroup container");let v;e[0]!==l||e[1]!==d?(v=C=>{d(l,C.nativeEvent)},e[0]=l,e[1]=d,e[2]=v):v=e[2];const y=v;let w;e[3]!==p||e[4]!==l?(w=C=>{p(l,C)},e[3]=p,e[4]=l,e[5]=w):w=e[5];const _=w;let x;e[6]!==h?(x=()=>{o.current.blur(),h()},e[6]=h,e[7]=x):x=e[7];const E=x;let R,S;e[8]!==s||e[9]!==b||e[10]!==_||e[11]!==E?(R=()=>{if(!b||s)return;const C=function(){const M=document.body.style,D=document.documentElement.style,{cursor:O}=D,{userSelect:z}=M;return D.cursor="ew-resize",M.userSelect="none",()=>{O?D.cursor=O:D.removeProperty("cursor"),z?M.userSelect=z:M.removeProperty("user-select")}}();return window.addEventListener("mousemove",_),window.addEventListener("mouseup",E),window.addEventListener("contextmenu",E),()=>{C(),window.removeEventListener("mousemove",_),window.removeEventListener("mouseup",E),window.removeEventListener("contextmenu",E)}},S=[s,b,_,E],e[8]=s,e[9]=b,e[10]=_,e[11]=E,e[12]=R,e[13]=S):(R=e[12],S=e[13]),f.useEffect(R,S);let I,P;e[14]!==l||e[15]!==a||e[16]!==m||e[17]!==g?(I=()=>(m(l,{id:l,order:a,type:"resizer",el:o}),()=>{g(l)}),P=[l,a,m,g],e[14]=l,e[15]=a,e[16]=m,e[17]=g,e[18]=I,e[19]=P):(I=e[18],P=e[19]),f.useLayoutEffect(I,P);let j,T;e[20]===Symbol.for("react.memo_cache_sentinel")?(T=u.jsx("span",{}),j=u.jsx("span",{}),e[20]=j,e[21]=T):(j=e[20],T=e[21]);let A;e[22]!==s?(A=u.jsxs(Aa,{$disabled:s,children:[T,j]}),e[22]=s,e[23]=A):A=e[23];let k;return e[24]!==y||e[25]!==A?(k=u.jsx(ka,{onMouseDown:y,ref:o,children:A}),e[24]=y,e[25]=A,e[26]=k):k=e[26],k},Ma=n=>{const e=L.c(8),{documentId:t,setDisplayedDocument:a,getCommentIntent:r}=n;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=u.jsx($n,{order:4}),e[0]=s):s=e[0];let o;e[1]!==r||e[2]!==n.children?(o=u.jsx(Sr,{getIntent:r,children:n.children}),e[1]=r,e[2]=n.children,e[3]=o):o=e[3];let i;return e[4]!==t||e[5]!==a||e[6]!==o?(i=u.jsxs(u.Fragment,{children:[s,u.jsx(Wt,{id:"content",minWidth:325,order:5,children:u.jsx(os,{documentId:t,setDisplayedDocument:a,children:o})})]}),e[4]=t,e[5]=a,e[6]=o,e[7]=i):i=e[7],i},$a=n=>{const e=L.c(14),{documentId:t,documentsOnPage:a,documentType:r,getCommentIntent:s,mainDocumentState:o,onFocusPath:i,onStructureParams:l,searchParams:c,setDisplayedDocument:p,structureParams:d}=n;let h;e[0]!==t||e[1]!==r||e[2]!==a||e[3]!==o||e[4]!==i||e[5]!==l||e[6]!==c||e[7]!==d?(h=u.jsx(Ta,{documentId:t,documentType:r,mainDocumentState:o,onFocusPath:i,onStructureParams:l,refs:a,searchParams:c,structureParams:d}),e[0]=t,e[1]=r,e[2]=a,e[3]=o,e[4]=i,e[5]=l,e[6]=c,e[7]=d,e[8]=h):h=e[8];let m;return e[9]!==t||e[10]!==s||e[11]!==p||e[12]!==h?(m=u.jsx(Ma,{documentId:t,getCommentIntent:s,setDisplayedDocument:p,children:h}),e[9]=t,e[10]=s,e[11]=p,e[12]=h,e[13]=m):m=e[13],m},Oa=function(n){const e=L.c(5),{children:t,navigate:a}=n;let r;e[0]!==a?(r=(i,l)=>{a((l===void 0?void 0:l)||{},i?{preview:i}:{})},e[0]=a,e[1]=r):r=e[1];const s=r;let o;return e[2]!==t||e[3]!==s?(o=u.jsx(vr.Provider,{value:s,children:t}),e[2]=t,e[3]=s,e[4]=o):o=e[4],o};function La(n,e){const t=L.c(9);let a;t[0]!==e||t[1]!==n?(a=()=>JSON.parse(localStorage.getItem(n)??JSON.stringify(e)),t[0]=e,t[1]=n,t[2]=a):a=t[2];const[r,s]=f.useState(a);let o,i;t[3]!==n||t[4]!==r?(o=()=>{localStorage.setItem(n,JSON.stringify(r))},i=[n,r],t[3]=n,t[4]=r,t[5]=o,t[6]=i):(o=t[5],i=t[6]),f.useEffect(o,i);let l;return t[7]!==r?(l=[r,s],t[7]=r,t[8]=l):l=t[8],l}function za(n){const e=L.c(11),{unstable_navigator:t}=n,a=!!(t!=null&&t.component),[r,s]=La("presentation/navigator",a),o=a?r:!1;let i;e:{if(!a){i=void 0;break e}let m;e[0]!==s?(m=()=>s(Wa),e[0]=s,e[1]=m):m=e[1],i=m}const l=i;let c;e[2]!==o||e[3]!==t?(c=function(){return u.jsx(u.Fragment,{children:o&&u.jsx(Na,{...t})})},e[2]=o,e[3]=t,e[4]=c):c=e[4];const p=c;let d;e[5]!==o||e[6]!==l?(d={navigatorEnabled:o,toggleNavigator:l},e[5]=o,e[6]=l,e[7]=d):d=e[7];let h;return e[8]!==p||e[9]!==d?(h=[d,p],e[8]=p,e[9]=d,e[10]=h):h=e[10],h}function Wa(n){return!n}function Da(n){const e=L.c(11),{minWidth:t,maxWidth:a,component:r}=n,s=t!=null&&a!=null&&t===a;let o;e[0]!==r?(o=u.jsx(r,{}),e[0]=r,e[1]=o):o=e[1];let i;e[2]!==a||e[3]!==t||e[4]!==o?(i=u.jsx(Wt,{id:"navigator",minWidth:t,maxWidth:a,order:1,children:o}),e[2]=a,e[3]=t,e[4]=o,e[5]=i):i=e[5];let l;e[6]!==s?(l=u.jsx($n,{order:2,disabled:s}),e[6]=s,e[7]=l):l=e[7];let c;return e[8]!==i||e[9]!==l?(c=u.jsxs(u.Fragment,{children:[i,l]}),e[8]=i,e[9]=l,e[10]=c):c=e[10],c}const Na=f.memo(Da),Ua=function(n){const e=L.c(3),{children:t,params:a}=n;let r;r=a;const s=r;let o;return e[0]!==t||e[1]!==s?(o=u.jsx(yr.Provider,{value:s,children:t}),e[0]=t,e[1]=s,e[2]=o):o=e[2],o},qa=function(n){const e=L.c(10),{children:t,devMode:a,name:r,navigate:s,params:o,searchParams:i,structureParams:l}=n;let c,p;e[0]!==a||e[1]!==r||e[2]!==s||e[3]!==o||e[4]!==i||e[5]!==l?(p={devMode:a,name:r,navigate:s,params:o,searchParams:i,structureParams:l},e[0]=a,e[1]=r,e[2]=s,e[3]=o,e[4]=i,e[5]=l,e[6]=p):p=e[6],c=p;const d=c;let h;return e[7]!==t||e[8]!==d?(h=u.jsx(gr.Provider,{value:d,children:t}),e[7]=t,e[8]=d,e[9]=h):h=e[9],h};function Nt(n){return Array.isArray(n)?n.join(","):n}const Fa=Ke.create(pe.iframe`
  box-shadow: 0 0 0 1px var(--card-border-color);
  border: 0;
  max-height: 100%;
  width: 100%;
  view-transition-class: presentation-tool-iframe;
`),Va=pe(de)`
  position: absolute;
  inset: 0;
  background: transparent;
`,Ha=f.forwardRef(function(n,e){const t=L.c(16),{animate:a,initial:r,onLoad:s,preventClick:o,src:i,variants:l,style:c}=n,p=`presentation-tool-iframe-${f.useId().replace(/[^a-zA-Z0-9-_]/g,"_")}`;let d;t[0]!==c||t[1]!==p?(d={...c,viewTransitionName:p},t[0]=c,t[1]=p,t[2]=d):d=t[2];let h;t[3]!==a||t[4]!==r||t[5]!==s||t[6]!==e||t[7]!==i||t[8]!==d||t[9]!==l?(h=u.jsx(Fa,{style:d,animate:a,initial:r,onLoad:s,ref:e,src:i,variants:l}),t[3]=a,t[4]=r,t[5]=s,t[6]=e,t[7]=i,t[8]=d,t[9]=l,t[10]=h):h=t[10];let m;t[11]!==o?(m=o&&u.jsx(Va,{}),t[11]=o,t[12]=m):m=t[12];let g;return t[13]!==h||t[14]!==m?(g=u.jsxs(u.Fragment,{children:[h,m]}),t[13]=h,t[14]=m,t[15]=g):g=t[15],g});function Ba(n){const e=L.c(16),{openPopup:t,previewLocationOrigin:a,previewLocationRoute:r}=n,{t:s}=ve(ye);let o;e[0]!==t?(o=b=>{b.preventDefault(),t(b.currentTarget.href)},e[0]=t,e[1]=o):o=e[1];const i=o;let l;e[2]!==s?(l=s("share-url.menu-item.open.text"),e[2]=s,e[3]=l):l=e[3];let c;e[4]!==l?(c=u.jsx(Q,{size:1,children:l}),e[4]=l,e[5]=c):c=e[5];let p;e[6]===Symbol.for("react.memo_cache_sentinel")?(p=["bottom-start"],e[6]=p):p=e[6];let d;e[7]!==s?(d=s("share-url.menu-item.open.text"),e[7]=s,e[8]=d):d=e[8];const h=`${a}${r}`;let m;e[9]!==i||e[10]!==d||e[11]!==h?(m=u.jsx(Se,{as:"a","aria-label":d,icon:Zr,mode:"bleed",href:h,rel:"opener",target:"_blank",tooltipProps:null,onClick:i}),e[9]=i,e[10]=d,e[11]=h,e[12]=m):m=e[12];let g;return e[13]!==c||e[14]!==m?(g=u.jsx(qe,{animate:!0,content:c,fallbackPlacements:p,placement:"bottom",portal:!0,children:m}),e[13]=c,e[14]=m,e[15]=g):g=e[15],g}const Ka=function(n){var z;const e=L.c(27),{fontSize:t,onChange:a,origin:r,padding:s,prefix:o,suffix:i,value:l}=n,c=t===void 0?1:t,p=s===void 0?3:s,{t:d}=ve(ye),{basePath:h}=((z=mn())==null?void 0:z.activeWorkspace)||{},m=h===void 0?"/":h,g=f.useRef(null),[b,v]=f.useState(void 0),[y,w]=f.useState(void 0);let _;e[0]===Symbol.for("react.memo_cache_sentinel")?(_=N=>{v(N.currentTarget.value)},e[0]=_):_=e[0];const x=_;let E;e[1]!==m||e[2]!==a||e[3]!==r||e[4]!==b||e[5]!==d?(E=N=>{var X;if(N.key==="Enter"){if(b===void 0)return;const V=b.startsWith("/")||b===""?`${r}${b}`:b;if(!V.startsWith(`${r}/`)&&V!==r){w(d("preview-location-input.error",{origin:r,context:"missing-origin"}));return}if(!r&&(V.startsWith(`${m}/`)||V===m)){w(d("preview-location-input.error",{basePath:m,context:"same-base-path"}));return}const J=V===r?`${r}/`:V;w(void 0),v(void 0),a(J.slice(r.length)),(X=g.current)==null||X.blur()}N.key==="Escape"&&(w(void 0),v(void 0))},e[1]=m,e[2]=a,e[3]=r,e[4]=b,e[5]=d,e[6]=E):E=e[6];const R=E;let S;e[7]===Symbol.for("react.memo_cache_sentinel")?(S=()=>{w(void 0),v(void 0)},e[7]=S):S=e[7];const I=S;let P;e[8]===Symbol.for("react.memo_cache_sentinel")?(P=()=>{w(void 0),v(void 0)},e[8]=P):P=e[8];let j;e[9]!==r||e[10]!==l?(j=[r,l],e[9]=r,e[10]=l,e[11]=j):j=e[11],f.useEffect(P,j);let T,A;e[12]===Symbol.for("react.memo_cache_sentinel")?(A={icon:es},e[12]=A):A=e[12],T=A;const k=y?T:void 0;let C;e[13]!==r||e[14]!==l?(C=()=>{w(void 0),v(r+l)},e[13]=r,e[14]=l,e[15]=C):C=e[15];let M;e[16]===Symbol.for("react.memo_cache_sentinel")?(M={zIndex:1},e[16]=M):M=e[16];const D=b===void 0?`${r}${l}`:b;let O;return e[17]!==y||e[18]!==c||e[19]!==R||e[20]!==p||e[21]!==o||e[22]!==i||e[23]!==k||e[24]!==C||e[25]!==D?(O=u.jsx(u.Fragment,{children:u.jsx(Kr,{clearButton:k,customValidity:y,fontSize:c,onBlur:I,onClear:C,onChange:x,onKeyDownCapture:R,padding:p,prefix:o,style:M,radius:2,ref:g,space:p,suffix:i,value:D})}),e[17]=y,e[18]=c,e[19]=R,e[20]=p,e[21]=o,e[22]=i,e[23]=k,e[24]=C,e[25]=D,e[26]=O):O=e[26],O},Ga=f.lazy(()=>Ae(()=>import("./QRCodeSVG-AKltr53h.js"),__vite__mapDeps([0,1]))),xt=24,Qa=16,Xa=224,Ja=pe(ts)`
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  height: ${xt}px;
  width: ${xt}px;
`,Ya=Ke.create(Ze),Za=Ke.create(Q),eo=Ke.create(Ja),On=f.memo(function(n){const{canToggleSharePreviewAccess:e,canUseSharedPreviewAccess:t,initialUrl:a,previewLocationRoute:r,perspective:s}=n,{t:o}=ve(ye),{push:i}=on(),l=He({apiVersion:Be}),c=kt(),[p,d]=f.useState(!0),[h,m]=f.useState(!1),[g,b]=f.useState(!1),[v,y]=f.useState(null),w=h||g||p,_=f.useMemo(()=>v?Rs(a,v,r,Nt(s)):null,[a,s,r,v]),[x,E]=f.useState(null);if(x)throw x;const R=f.useCallback(()=>{i({closable:!0,status:"warning",title:o("share-preview-menu.error_toggle-sharing",{context:"toggle-sharing"})})},[i,o]),S=f.useCallback(async()=>{try{b(!0),await Is(l,"@sanity/presentation",typeof window>"u"?"":location.href,c==null?void 0:c.id),y(null)}catch(j){E(j)}finally{b(!1)}},[l,c==null?void 0:c.id]),I=f.useCallback(async()=>{try{m(!0);const j=await Ts(l,"@sanity/presentation",typeof window>"u"?"":location.href,c==null?void 0:c.id);y(j.secret)}catch(j){E(j)}finally{m(!1)}},[l,c==null?void 0:c.id]),P=f.useCallback(()=>{try{if(!_)throw new Error("No URL to copy");navigator.clipboard.writeText(_.toString()),i({closable:!0,status:"success",title:o("share-url.clipboard.status",{context:"success"})})}catch(j){E(j)}},[i,o,_]);return f.useEffect(()=>{let j=new AbortController,T=[];async function A(C,M){const{result:D,syncTags:O}=await l.fetch(Br,{},{filterResponse:!1,lastLiveEventId:C,tag:"presentation.fetch-shared-access-secret"});Array.isArray(O)&&(T=O),M.aborted||y(D)}const k=l.live.events().subscribe({next:C=>{C.type==="message"&&(j.abort(),j=new AbortController,C.tags.some(M=>T.includes(M))&&A(C.id,j.signal))},error:E});return A(null,j.signal).finally(()=>d(!1)),()=>{k.unsubscribe(),j.abort()}},[l]),u.jsx(Tr,{button:u.jsx(Se,{"aria-label":o("preview-frame.share-button.aria-label"),icon:Or,mode:"bleed",tooltipProps:null}),id:"share-menu",menu:u.jsx(Ir,{style:{maxWidth:248},padding:t?void 0:0,children:t?u.jsxs(u.Fragment,{children:[u.jsx("label",{style:{cursor:"pointer"},children:u.jsxs(kr,{columns:2,rows:2,gapX:3,gapY:1,style:{justifyContent:"center",alignItems:"center",gridTemplateColumns:"min-content 1fr",gridTemplateRows:"min-content"},paddingTop:3,paddingX:3,children:[u.jsx(qe,{animate:!0,content:u.jsx(Q,{size:1,children:o("share-preview-menu.toggle-button.tooltip",{context:_?"disable":"enable"})}),fallbackPlacements:["bottom-start"],placement:"bottom",portal:!0,children:u.jsx(gn,{checked:h||_!==null&&!g,readOnly:h||g,indeterminate:p,onChange:e?_?S:I:R})}),u.jsx(Q,{size:1,weight:"medium",children:o("share-preview-menu.toggle-button.label",{context:"first-line"})}),u.jsx("span",{}),u.jsx(Q,{muted:!0,size:1,children:o("share-preview-menu.toggle-button.label",{context:"second-line"})})]})}),u.jsx(de,{padding:3,paddingTop:2,children:u.jsxs(Oe,{space:3,children:[u.jsx(ue,{tone:w||!_?"transparent":void 0,style:{position:"relative",aspectRatio:"1 / 1",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(fn,{children:w?u.jsx(Ya,{muted:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}):_?u.jsx(u.Fragment,{children:u.jsxs(f.Suspense,{fallback:u.jsx(Ze,{}),children:[u.jsx(Ga,{title:o("share-preview-menu.qr-code.title",{url:_.toString()}),value:_.toString(),size:Xa,color:"var(--card-fg-color)",logoSize:xt+Qa}),u.jsx(eo,{initial:{opacity:-.5},animate:{opacity:1.5},exit:{opacity:0}})]})}):u.jsx(Za,{muted:!0,size:1,style:{maxWidth:"100px",textWrap:"pretty",textAlign:"center"},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:o("share-preview-menu.qr-code.placeholder")})})}),u.jsx(Q,{muted:!0,size:1,children:o("share-preview-menu.qr-code.instructions")})]})}),u.jsx(Ar,{}),u.jsx(Mr,{disabled:!_||g,icon:$r,onClick:P,text:o("share-preview-menu.copy-url.text")})]}):u.jsx(ue,{padding:2,tone:"caution",radius:3,children:u.jsx(Q,{style:{textWrap:"pretty"},children:o("share-preview-menu.error",{context:"missing-grants"})})})}),popover:{constrainSize:!0,placement:"bottom",portal:!0}})});On.displayName="Memo(SharePreviewMenu)";const to=n=>{const e=L.c(97),{canSharePreviewAccess:t,canToggleSharePreviewAccess:a,canUseSharedPreviewAccess:r,dispatch:s,iframe:o,iframeRef:i,initialUrl:l,navigatorEnabled:c,onPathChange:p,onRefresh:d,openPopup:h,overlaysConnection:m,perspective:g,previewUrl:b,setViewport:v,targetOrigin:y,toggleNavigator:w,toggleOverlay:_,viewport:x,visualEditing:E}=n,{overlaysEnabled:R}=E,{t:S}=ve(ye);let I;e[0]!==v||e[1]!==x?(I=()=>v(x==="desktop"?"mobile":"desktop"),e[0]=v,e[1]=x,e[2]=I):I=e[2];const P=I;let j;j=y===location.origin?"":y;const T=j;let A;e[3]!==s||e[4]!==i.current||e[5]!==d||e[6]!==b||e[7]!==y?(A=()=>{d(()=>{i.current&&(s({type:hn}),Object.assign(i.current,{src:`${y}${b||"/"}`}))})},e[3]=s,e[4]=i.current,e[5]=d,e[6]=b,e[7]=y,e[8]=A):A=e[8];const k=A;let C;const M=new URL(b||"/",y),{pathname:D,search:O}=Cs(M);C=`${D}${O}`;const z=C;let N;e[9]===Symbol.for("react.memo_cache_sentinel")?(N={width:"100%"},e[9]=N):N=e[9];let X;e[10]!==c||e[11]!==S||e[12]!==w?(X=w&&u.jsx(Se,{"aria-label":S("preview-frame.navigator.toggle-button.aria-label"),icon:_r,mode:"bleed",onClick:w,selected:c,tooltipProps:{content:u.jsx(Q,{size:1,children:S("preview-frame.navigator.toggle-button.tooltip")}),fallbackPlacements:["bottom-start"],placement:"bottom"}}),e[10]=c,e[11]=S,e[12]=w,e[13]=X):X=e[13];let V;e[14]===Symbol.for("react.memo_cache_sentinel")?(V={whiteSpace:"nowrap"},e[14]=V):V=e[14];const J=R?"disable":"enable";let re;e[15]!==S||e[16]!==J?(re=S("preview-frame.overlay.toggle-button.tooltip",{context:J}),e[15]=S,e[16]=J,e[17]=re):re=e[17];let ie;e[18]!==re?(ie=u.jsx(de,{padding:1,children:u.jsx(Q,{size:1,children:re})}),e[18]=re,e[19]=ie):ie=e[19];let W;e[20]===Symbol.for("react.memo_cache_sentinel")?(W=u.jsx(de,{paddingY:1,children:u.jsx(Lr,{keys:["Alt"],style:{marginTop:-4,marginBottom:-4}})}),e[20]=W):W=e[20];let Z;e[21]!==ie?(Z=u.jsxs(ne,{align:"center",style:V,children:[ie,W]}),e[21]=ie,e[22]=Z):Z=e[22];let ce;e[23]===Symbol.for("react.memo_cache_sentinel")?(ce=["bottom-start"],e[23]=ce):ce=e[23];let le;e[24]===Symbol.for("react.memo_cache_sentinel")?(le={lineHeight:0,borderRadius:999,userSelect:"none"},e[24]=le):le=e[24];const H=R?"transparent":void 0;let F;e[25]===Symbol.for("react.memo_cache_sentinel")?(F={margin:-4},e[25]=F):F=e[25];const B=o.status==="loading"||m!=="connected";let K;e[26]!==R||e[27]!==B||e[28]!==_?(K=u.jsx("div",{style:F,children:u.jsx(gn,{checked:R,onChange:_,disabled:B})}),e[26]=R,e[27]=B,e[28]=_,e[29]=K):K=e[29];const se=!R;let G;e[30]!==S?(G=S("preview-frame.overlay.toggle-button.text"),e[30]=S,e[31]=G):G=e[31];let ee;e[32]!==se||e[33]!==G?(ee=u.jsx(de,{children:u.jsx(Q,{muted:se,size:1,weight:"medium",children:G})}),e[32]=se,e[33]=G,e[34]=ee):ee=e[34];let Y;e[35]!==K||e[36]!==ee?(Y=u.jsxs(ne,{align:"center",gap:3,children:[K,ee]}),e[35]=K,e[36]=ee,e[37]=Y):Y=e[37];let ae;e[38]!==H||e[39]!==Y?(ae=u.jsx(ue,{as:"label",flex:"none",padding:3,marginX:1,style:le,tone:H,children:Y}),e[38]=H,e[39]=Y,e[40]=ae):ae=e[40];let oe;e[41]!==Z||e[42]!==ae?(oe=u.jsx(qe,{animate:!0,content:Z,fallbackPlacements:ce,placement:"bottom",portal:!0,children:ae}),e[41]=Z,e[42]=ae,e[43]=oe):oe=e[43];let he;e[44]!==o.status||e[45]!==S?(he=o.status==="loaded"?S("preview-frame.refresh-button.tooltip"):S("preview-frame.status",{context:o.status}),e[44]=o.status,e[45]=S,e[46]=he):he=e[46];let fe;e[47]!==he?(fe=u.jsx(Q,{size:1,children:he}),e[47]=he,e[48]=fe):fe=e[48];let _e;e[49]===Symbol.for("react.memo_cache_sentinel")?(_e=["bottom-end"],e[49]=_e):_e=e[49];let me;e[50]!==S?(me=S("preview-frame.refresh-button.aria-label"),e[50]=S,e[51]=me):me=e[51];const je=o.status==="reloading"||o.status==="refreshing";let ge;e[52]!==k||e[53]!==me||e[54]!==je?(ge=u.jsx(Se,{"aria-label":me,icon:zr,mode:"bleed",loading:je,onClick:k,tooltipProps:null}),e[52]=k,e[53]=me,e[54]=je,e[55]=ge):ge=e[55];let Ee;e[56]!==fe||e[57]!==ge?(Ee=u.jsx(de,{padding:1,children:u.jsx(qe,{animate:!0,content:fe,fallbackPlacements:_e,placement:"bottom",portal:!0,children:ge})}),e[56]=fe,e[57]=ge,e[58]=Ee):Ee=e[58];let be;e[59]!==h||e[60]!==T||e[61]!==z?(be=u.jsx(de,{padding:1,children:u.jsx(Ba,{openPopup:h,previewLocationOrigin:T,previewLocationRoute:z})}),e[59]=h,e[60]=T,e[61]=z,e[62]=be):be=e[62];let Ce;e[63]!==p||e[64]!==T||e[65]!==z||e[66]!==Ee||e[67]!==be?(Ce=u.jsx(de,{flex:1,children:u.jsx(Ka,{prefix:Ee,onChange:p,origin:T,suffix:be,value:z})}),e[63]=p,e[64]=T,e[65]=z,e[66]=Ee,e[67]=be,e[68]=Ce):Ce=e[68];const Le=x==="desktop"?"narrow":"full";let Re;e[69]!==S||e[70]!==Le?(Re=S("preview-frame.viewport-button.tooltip",{context:Le}),e[69]=S,e[70]=Le,e[71]=Re):Re=e[71];let Te;e[72]!==Re?(Te=u.jsx(Q,{size:1,children:Re}),e[72]=Re,e[73]=Te):Te=e[73];let Me;e[74]===Symbol.for("react.memo_cache_sentinel")?(Me=["bottom-start"],e[74]=Me):Me=e[74];let we;e[75]!==S?(we=S("preview-frame.viewport-button.aria-label"),e[75]=S,e[76]=we):we=e[76];const ze=x==="desktop"?jr:Er;let xe;e[77]!==we||e[78]!==ze||e[79]!==P?(xe=u.jsx(Se,{"aria-label":we,icon:ze,mode:"bleed",onClick:P,tooltipProps:null}),e[77]=we,e[78]=ze,e[79]=P,e[80]=xe):xe=e[80];let Pe;e[81]!==Te||e[82]!==xe?(Pe=u.jsx(ne,{align:"center",flex:"none",gap:1,children:u.jsx(qe,{animate:!0,content:Te,fallbackPlacements:Me,placement:"bottom",portal:!0,children:xe})}),e[81]=Te,e[82]=xe,e[83]=Pe):Pe=e[83];let $;e[84]!==t||e[85]!==a||e[86]!==r||e[87]!==l||e[88]!==g||e[89]!==z?($=t&&u.jsx(ne,{align:"center",flex:"none",gap:1,children:u.jsx(On,{canToggleSharePreviewAccess:a,canUseSharedPreviewAccess:r,previewLocationRoute:z,initialUrl:l,perspective:g})}),e[84]=t,e[85]=a,e[86]=r,e[87]=l,e[88]=g,e[89]=z,e[90]=$):$=e[90];let q;return e[91]!==oe||e[92]!==Ce||e[93]!==Pe||e[94]!==$||e[95]!==X?(q=u.jsxs(ne,{align:"center",gap:1,paddingX:1,style:N,children:[X,oe,Ce,Pe,$]}),e[91]=oe,e[92]=Ce,e[93]=Pe,e[94]=$,e[95]=X,e[96]=q):q=e[96],q};function no(n){var c;const e=L.c(7),t=ro,a=(c=n.options)==null?void 0:c.component;let r;e[0]!==a||e[1]!==n?(r=a?u.jsx(a,{...n,renderDefault:t}):t(n),e[0]=a,e[1]=n,e[2]=r):r=e[2];const s=r;let o;e[3]===Symbol.for("react.memo_cache_sentinel")?(o={position:"relative"},e[3]=o):o=e[3];let i;e[4]===Symbol.for("react.memo_cache_sentinel")?(i={minHeight:0},e[4]=i):i=e[4];let l;return e[5]!==s?(l=u.jsx(ue,{flex:"none",padding:2,borderBottom:!0,style:o,children:u.jsx(ne,{align:"center",style:i,children:s})}),e[5]=s,e[6]=l):l=e[6],l}function ro(n){return u.jsx(to,{...n})}const ht=Ke.create(ne),Ln=f.memo(f.forwardRef(function(n,e){const{dispatch:t,iframe:a,header:r,initialUrl:s,loadersConnection:o,overlaysConnection:i,perspective:l,viewport:c,vercelProtectionBypass:p}=n,[d,h]=f.useState(null),m=Nt(d===null?l:d),g=f.useMemo(()=>{const W=new URL(s);return W.searchParams.get(Fe)||W.searchParams.set(Fe,m),(p||W.searchParams.get(Ne))&&W.searchParams.set(jt,"samesitenone"),p&&!W.searchParams.get(Ne)&&W.searchParams.set(Ne,p),W},[s,m,p]);f.useEffect(()=>{o==="connected"&&h(W=>W===null?l:W)},[o,l]);const{t:b}=ve(ye),{devMode:v}=It(),y=wr(),w=f.useRef(null),_=u.jsx(no,{...n,iframeRef:w,options:r});f.useImperativeHandle(e,()=>w.current);const x=a.status==="loading"||a.status==="reloading",[E,R]=f.useState(!1),S=a.status==="refreshing",[I,P]=f.useState(!1),j=x||S||i==="connecting",T=f.useCallback(()=>{w.current&&(w.current.src=g.toString(),t({type:hn}))},[t,g]),A=f.useCallback(()=>{C(!0)},[]),[k,C]=f.useState(!1),[M,D]=f.useState(!1);f.useEffect(()=>{if(!(x||S)&&(i==="connecting"||i==="reconnecting")){const W=setTimeout(()=>{D(!0)},5e3);return()=>clearTimeout(W)}},[i,x,S]),f.useEffect(()=>{if(!(x||S||!M)){if(i==="connected"&&(P(!1),D(!1),R(!1),C(!1)),i==="connecting"){const W=setTimeout(()=>{R(!0),console.error("Unable to connect to visual editing. Make sure you've setup '@sanity/visual-editing' correctly")},Ft);return()=>clearTimeout(W)}if(i==="reconnecting"){const W=setTimeout(()=>{R(!0),P(!0)},Ft);return()=>clearTimeout(W)}}},[x,i,S,M]);const O=f.useCallback(()=>{t({type:dn})},[t]);f.useEffect(()=>{if(!w.current)return;const W=w.current;function Z(){W===document.activeElement&&W.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0,cancelable:!0}))}return window.addEventListener("blur",Z),()=>{window.removeEventListener("blur",Z)}},[]);const z=f.useMemo(()=>(x||i==="connecting"&&a.status!=="refreshing")&&!k,[k,a.status,x,i]),N=f.useSyncExternalStore(f.useCallback(()=>()=>{},[]),()=>CSS.supports("(view-transition-name: test)")),X=f.useMemo(()=>[z?"background":"active",x?"reloading":"idle",N?"":c,M&&!k?"timedOut":""],[N,k,x,z,M,c]),[V,J]=f.useState(c),[re,ie]=f.useState(ft[c]);return f.useEffect(()=>{if(N&&c!==V){const W=()=>{J(c),ie(ft[c])};!y&&"startViewTransition"in document&&typeof document.startViewTransition=="function"?document.startViewTransition(()=>xr.flushSync(()=>W())):W()}},[N,y,V,c]),u.jsx(cs,{transition:y?{duration:0}:void 0,children:u.jsxs(Pr,{children:[_,u.jsx(ue,{flex:1,tone:"transparent",children:u.jsxs(ne,{align:"center",height:"fill",justify:"center",padding:(N?V:c)==="desktop"?0:2,sizing:"border",style:{position:"relative",cursor:j?"wait":void 0},children:[u.jsx(fn,{children:!I&&!x&&!S&&M&&!k?u.jsx(ht,{initial:"initial",animate:"animate",exit:"exit",variants:Jt,justify:"center",align:"center",style:{inset:"0",position:"absolute",backdropFilter:E?"blur(16px) saturate(0.5) grayscale(0.5)":"blur(2px)",transition:"backdrop-filter 0.2s ease-in-out",WebkitBackdropFilter:E?"blur(16px) saturate(0.5) grayscale(0.5)":"blur(2px)",WebkitTransition:"-webkit-backdrop-filter 0.2s ease-in-out",zIndex:1},children:u.jsxs(ne,{style:{...st[c]},justify:"center",align:"center",direction:"column",gap:4,children:[E&&u.jsx(Se,{disabled:!0,mode:"ghost",text:b("preview-frame.continue-button.text"),style:{opacity:0}}),u.jsx(ue,{radius:2,tone:E?"caution":"inherit",padding:4,shadow:1,children:u.jsxs(ne,{justify:"center",align:"center",direction:"column",gap:4,children:[u.jsx(Ze,{muted:!0}),u.jsx(Q,{muted:!0,size:1,children:E?b("preview-frame.status",{context:"timeout"}):b("preview-frame.status",{context:"connecting"})})]})}),E&&u.jsx(Se,{tone:"critical",onClick:A,text:b("preview-frame.continue-button.text")})]})}):(x||i==="connecting"&&a.status!=="refreshing")&&!k?u.jsx(ht,{initial:"initial",animate:"animate",exit:"exit",variants:Jt,justify:"center",align:"center",style:{inset:"0",position:"absolute"},children:u.jsxs(ne,{style:{...st[c]},justify:"center",align:"center",direction:"column",gap:4,children:[u.jsx(Ze,{muted:!0}),u.jsx(Q,{muted:!0,size:1,children:b("preview-frame.status",{context:"loading"})})]})}):I&&!k?u.jsx(ht,{initial:"initial",animate:"animate",exit:"exit",variants:so,justify:"center",align:"center",style:{background:"var(--card-bg-color)",inset:"0",position:"absolute"},children:u.jsx(Dt,{flex:1,message:b("preview-frame.connection.error.text"),onRetry:T,onContinueAnyway:A,children:v&&u.jsxs(u.Fragment,{children:[i!=="connected"&&u.jsx(ue,{padding:3,radius:2,tone:"critical",children:u.jsxs(Oe,{space:3,children:[u.jsx(et,{muted:!0,size:0,children:b("preview-frame.overlay.connection-status.label")}),u.jsx(tt,{size:1,children:b("channel.status",{context:i})})]})}),o!=="connected"&&u.jsx(ue,{padding:3,radius:2,tone:"critical",children:u.jsxs(Oe,{space:3,children:[u.jsx(et,{muted:!0,size:0,children:b("preview-frame.loader.connection-status.label")}),u.jsx(tt,{size:1,children:b("channel.status",{context:o})})]})})]})})}):null}),u.jsx(Ha,{animate:X,initial:["background"],onLoad:O,preventClick:z,ref:w,src:g.toString(),style:re,variants:ft})]})})]})})}));Ln.displayName="Memo(ForwardRef(Preview))";const st={desktop:{width:"100%",height:"100%"},mobile:{width:375,height:650}},Jt={initial:{opacity:1},animate:{opacity:[0,0,1]},exit:{opacity:[1,0,0]}},so={initial:{opacity:1},animate:{opacity:[0,0,1]},exit:{opacity:[1,0,0]}},ft={desktop:{...st.desktop,boxShadow:"0 0 0 0px var(--card-border-color)"},mobile:{...st.mobile,boxShadow:"0 0 0 1px var(--card-border-color)"},background:{opacity:0,scale:1},idle:{scale:1},reloading:{scale:[1,1,1,.98]},active:{opacity:[0,0,1],scale:1},timedOut:{opacity:[0,0,1]}};function ao(){let n=!1;return(...e)=>{n||(console.warn(...e),n=!0)}}const oo=ao();function io(n,e){fr(n);const[t,a]=f.useState({}),[r,s]=f.useState({}),o=f.useRef(""),i=f.useCallback((l,c,p=[])=>{const d=p.filter(h=>"_projectId"in h&&h._projectId?(oo("Cross dataset references are not supported yet, ignoring source document",h),!1):h);(c==="published"?a:s)(h=>{const m={};for(const b of d)m[b._id]=b;if(o.current!==e.current.url)return o.current=e.current.url,{[l]:m};const g=h[l];return as(g,m)?h:{...h,[l]:m}})},[e]);return[f.useMemo(()=>{const l=Object.values(n==="published"?t:r).reduce((c,p)=>(Object.values(p).forEach(d=>{c[d._id]=d}),c),{});return Object.values(l)},[n,r,t]),i]}function zn(n,e){return n instanceof Function?n(e):n}function co(n,e){var t;if(n.resolve){const a=(t=n.resolve(e))==null?void 0:t.filter;return a?`// groq
*[${a}][0]{_id, _type}`:void 0}return"type"in n?`// groq
*[_type == "${n.type}"][0]{_id, _type}`:`// groq
*[${zn(n.filter,e)}][0]{_id, _type}`}function lo(n,e){var t;return n.resolve?((t=n.resolve(e))==null?void 0:t.params)??e.params:"type"in n?{}:zn(n.params,e)??e.params}function uo(n,e){const t=Array.isArray(n)?n:[n];for(n of t){let a,r=n;if(typeof n=="string")try{const s=new URL(n);a=s.origin,r=s.pathname}catch{}if(!(a&&e.origin!==a))try{const s=Ms(r,{decode:decodeURIComponent})(e.pathname);if(s){const{params:o,path:i}=s;return{origin:a,params:o,path:i}}}catch{throw new Error(`"${n}" is not a valid route pattern`)}}}function po(n){var E,R;const e=L.c(20),{navigate:t,navigationHistory:a,path:r,previewUrl:s,resolvers:o}=n;let i;e[0]!==o?(i=o===void 0?[]:o,e[0]=o,e[1]=i):i=e[1];const l=i,{state:c}=Rt();let p;e[2]===Symbol.for("react.memo_cache_sentinel")?(p={apiVersion:Be},e[2]=p):p=e[2];const d=He(p);let h;e[3]!==r||e[4]!==c?(h=r||((R=(E=c._searchParams)==null?void 0:E.find(mo))==null?void 0:R[1])||"",e[3]=r,e[4]=c,e[5]=h):h=e[5];const m=h,[g,b]=f.useState(void 0),v=f.useRef(void 0);let y;e[6]!==t||e[7]!==a?(y=(S,I)=>{var P,j;(!S||v.current!==S._id)&&(b({document:S,path:I.pathname}),v.current=S==null?void 0:S._id,((P=a.at(-1))==null?void 0:P.id)===((j=a.at(-2))==null?void 0:j.id)&&(t==null||t({id:S==null?void 0:S._id,type:S==null?void 0:S._type})))},e[6]=t,e[7]=a,e[8]=y):y=e[8];const w=un(y);let _;e[9]!==d||e[10]!==w||e[11]!==s||e[12]!==m||e[13]!==l?(_=()=>{const S=typeof s=="string"?s:typeof s=="object"&&(s==null?void 0:s.origin)||location.origin,I=new URL(m,S);if(l.length){let P;for(const j of l){const T=uo(j.route,I);if(T){P={context:T,resolver:j};break}}if(P){const j=co(P.resolver,P.context),T=lo(P.resolver,P.context);if(j){const A=new AbortController,k={perspective:"drafts",signal:A.signal};return d.fetch(j,T,k).then(C=>w(C,I)).catch(C=>{C instanceof Error&&C.name==="AbortError"||(b({document:void 0,path:I.pathname}),v.current=void 0)}),()=>{A.abort()}}}}b(void 0),v.current=void 0},e[9]=d,e[10]=w,e[11]=s,e[12]=m,e[13]=l,e[14]=_):_=e[14];let x;return e[15]!==d||e[16]!==s||e[17]!==m||e[18]!==l?(x=[d,s,m,l],e[15]=d,e[16]=s,e[17]=m,e[18]=l,e[19]=x):x=e[19],f.useEffect(_,x),g}function mo(n){const[e]=n;return e==="preview"}const ho=vn(At(),bn(1));yn(ho);const fo=/^([\w-]+):(0|[1-9][0-9]*)$/,go=/^([\w-]+):([0-9]+),([0-9]+)$/,vo=/^([\w-]+):([\w-]+)$/;function yo(n){const e=[];for(const t of n.split(".")){const a=fo.exec(t);if(a){e.push(a[1],Number(a[2]));continue}const r=go.exec(t);if(r){e.push(r[1],[Number(r[2]),Number(r[3])]);continue}const s=vo.exec(t);if(s){e.push(s[1],{_key:s[2]});continue}e.push(t)}return e}const Yt=vn(At(),bn(1));Wr({origin:Yt,href:Yt,data:yn(ns(At(),ss()))});function bo(n){var t;if(n===void 0)return;const e=(t=decodeURIComponent(n))==null?void 0:t.split(".");return e[0]==="drafts"&&e.shift(),e.join(".")}function wo(n){if(n!==void 0)return pn.toString(yo(decodeURIComponent(n)))}function xo(n){return{id:bo(n.id),path:wo(n.path),type:n.type}}function Ye(n){return Object.fromEntries(Object.entries(n).filter(([,e])=>e!==void 0&&e!==""&&e!==null))}function Po({initialPreviewUrl:n,routerNavigate:e,routerState:t,routerSearchParams:a,frameStateRef:r}){const s=f.useMemo(()=>{const{id:d,path:h,type:m}=xo(t);return{id:d,type:m,path:h,preview:a.preview||`${n.pathname}${n.search}`,perspective:a.perspective,viewport:a.viewport,inspect:a.inspect,rev:a.rev,since:a.since,template:a.template,templateParams:a.templateParams,view:a.view,pathKey:a.pathKey,instruction:a.instruction,comment:a.comment,changesInspectorTab:a.changesInspectorTab}},[t,a,n]),o=f.useMemo(()=>Ye({inspect:s.inspect,path:s.path,rev:s.rev,since:s.since,template:s.template,templateParams:s.templateParams,view:s.view,pathKey:s.pathKey,instruction:s.instruction,comment:s.comment,changesInspectorTab:s.changesInspectorTab}),[s.changesInspectorTab,s.comment,s.inspect,s.instruction,s.path,s.pathKey,s.rev,s.since,s.template,s.templateParams,s.view]),i=f.useMemo(()=>Ye({perspective:s.perspective,preview:s.preview,viewport:s.viewport}),[s.perspective,s.preview,s.viewport]),l=f.useRef(t);f.useEffect(()=>{l.current=t},[t]);const[c,p]=f.useState([t]);return{navigate:f.useCallback((d,h={},m)=>{d.id&&(d.id=at(d.id));const{_searchParams:g,...b}=l.current,v=(g||[]).reduce((x,[E,R])=>(x[E]=R,x),{}),y=Ye({...b,...d}),w=Ye({...v,...h});b.id!==y.id&&(delete w.template,delete w.templateParams),y._searchParams=Object.entries(w).reduce((x,[E,R])=>[...x,[E,R]],[]);const _=m??w.preview===r.current.url;p(x=>[...x,y]),e(y,{replace:_})},[e,r]),navigationHistory:c,params:s,searchParams:i,structureParams:o}}const So=n=>{const e=L.c(10),[t,a]=f.useState(_o);let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=d=>{const h=window.open(d,"_blank");h&&a(m=>new Set(m).add(h))},e[0]=r):r=e[0];const s=r;let o,i;e[1]!==n||e[2]!==t?(o=()=>{const d=[];if(t.size&&n)for(const h of t)h&&"closed"in h&&!h.closed&&d.push(n.addTarget(h));return()=>{d.forEach(jo)}},i=[n,t],e[1]=n,e[2]=t,e[3]=o,e[4]=i):(o=e[3],i=e[4]),f.useEffect(o,i);let l,c;e[5]!==t?(l=()=>{if(t.size){const d=setInterval(()=>{const h=new Set;for(const m of t)m&&"closed"in m&&m.closed&&h.add(m);h.size&&a(m=>{const g=new Set(m);for(const b of h)g.delete(b);return g})},Dr);return()=>{clearInterval(d)}}},c=[t],e[5]=t,e[6]=l,e[7]=c):(l=e[6],c=e[7]),f.useEffect(l,c);let p;return e[8]!==t?(p={popups:t,open:s},e[8]=t,e[9]=p):p=e[9],p};function _o(){return new Set}function jo(n){return n()}function Eo(n,e,t,a,r){var d,h;const s=He({apiVersion:Be}),o=mn(),i=((d=o==null?void 0:o.activeWorkspace)==null?void 0:d.basePath)||"/",l=((h=o==null?void 0:o.activeWorkspace)==null?void 0:h.name)||"default",c=Ro(e,i,l,a),p=To(r&&typeof n=="object"||typeof n=="function",c);return Rn(async()=>{if(typeof n=="string"){const g=new URL(n,location.origin);let b=g;try{if(a){const v=new URL(a,g);v.origin===g.origin&&(b=v)}}catch{}return location.origin===b.origin&&(b.pathname.startsWith(`${i}/`)||b.pathname===i)?g:b}const m=await(typeof n=="object"?Ns(n):n)({client:s,previewUrlSecret:p,studioPreviewPerspective:Nt(t),previewSearchParam:a,studioBasePath:i});return new URL(m,location.origin)},[...c,p])}const Co=Symbol("sanity/presentation/resolveUUID");function Ro(n,e,t,a){const r=L.c(12);let s;r[0]!==a?(s=()=>a||"",r[0]=a,r[1]=s):s=r[1];const[o,i]=f.useState(s),l=f.useRef(0);let c,p;r[2]!==o||r[3]!==a?(c=()=>{if(o&&a)return window.clearTimeout(l.current),()=>{l.current=window.setTimeout(()=>{i("")},100)}},p=[o,a],r[2]=o,r[3]=a,r[4]=c,r[5]=p):(c=r[4],p=r[5]),f.useEffect(c,p);const d=kt();let h;const m=d==null?void 0:d.id;let g;return r[6]!==e||r[7]!==o||r[8]!==m||r[9]!==n||r[10]!==t?(g=["sanity/presentation",e,t,n,m,Co,o],r[6]=e,r[7]=o,r[8]=m,r[9]=n,r[10]=t,r[11]=g):g=r[11],h=g,h}function To(n,e){const t=L.c(10);let a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a={apiVersion:Be},t[0]=a):a=t[0];const r=He(a),s=kt(),[o,i]=f.useState("");let l;t[1]!==r||t[2]!==(s==null?void 0:s.id)||t[3]!==e||t[4]!==n||t[5]!==o?(l=n?Rn(async()=>await Ds(r,"@sanity/presentation",typeof window>"u"?"":location.href,s==null?void 0:s.id),[...e,o]):null,t[1]=r,t[2]=s==null?void 0:s.id,t[3]=e,t[4]=n,t[5]=o,t[6]=l):l=t[6];const c=l;let p,d;return t[7]!==c?(p=()=>{if(!c)return;const h=setTimeout(()=>{f.startTransition(()=>i(c.expiresAt.toString()))},c.expiresAt.getTime()-Date.now());return()=>clearTimeout(h)},d=[c],t[7]=c,t[8]=p,t[9]=d):(p=t[8],d=t[9]),f.useEffect(p,d),(c==null?void 0:c.secret)||null}function gt(){const n=L.c(4);let e;n[0]===Symbol.for("react.memo_cache_sentinel")?(e=new Map,n[0]=e):e=n[0];const[t,a]=f.useState(e);let r;e:{const c=Array.from(t.values());if(c.find(Ao)){r="connected";break e}const p=c.filter(ko);if(p.length){r=p.some(Io)?"connecting":"reconnecting";break e}r="idle"}const s=r;let o;n[1]===Symbol.for("react.memo_cache_sentinel")?(o=c=>{a(p=>{var h;const d=new Map(p);if(c.status==="disconnected")d.delete(c.connection);else{const m=((h=d.get(c.connection))==null?void 0:h.hasConnected)||c.status==="connected",g=c.status==="handshaking"?"connecting":c.status;d.set(c.connection,{status:g,hasConnected:m})}return d})},n[1]=o):o=n[1];const i=o;let l;return n[2]!==s?(l=[s,i],n[2]=s,n[3]=l):l=n[3],l}function Io(n){const{hasConnected:e}=n;return!e}function ko(n){const{status:e}=n;return e==="connecting"}function Ao(n){const{status:e}=n;return e==="connected"}const Mo=f.lazy(()=>Ae(()=>import("./LiveQueries-C-Chv7Gs.js"),__vite__mapDeps([2,1,3]))),$o=f.lazy(()=>Ae(()=>import("./PostMessageDocuments-5hTZfEqz.js"),__vite__mapDeps([4,1]))),Oo=f.lazy(()=>Ae(()=>import("./PostMessageRefreshMutations-aGHF0X78.js"),__vite__mapDeps([5,1]))),Lo=f.lazy(()=>Ae(()=>import("./PostMessagePerspective-BWL6Ou7N.js"),__vite__mapDeps([6,1]))),zo=f.lazy(()=>Ae(()=>import("./PostMessagePreviewSnapshots-BvlO0JIB.js"),__vite__mapDeps([7,1]))),Wo=f.lazy(()=>Ae(()=>import("./PostMessageSchema-CY3y-YNl.js"),__vite__mapDeps([8,1]))),Do=f.lazy(()=>Ae(()=>import("./PostMessageTelemetry-B4Zt_Eqf.js"),__vite__mapDeps([9,1]))),No=pe(ne)`
  overflow-x: auto;
`;function Uo(n){var Me,we,ze,xe,Pe;const{canCreateUrlPreviewSecrets:e,canToggleSharePreviewAccess:t,canUseSharedPreviewAccess:a,tool:r,vercelProtectionBypass:s}=n,o=(Me=r.options)==null?void 0:Me.components,i=(we=r.options)==null?void 0:we.previewUrl,l=r.name||sr,{unstable_navigator:c,unstable_header:p}=o||{},{navigate:d,state:h}=Rt(),m=ln(Object.fromEntries(h._searchParams||[])),{perspectiveStack:g,selectedPerspectiveName:b="drafts",selectedReleaseId:v}=ar(),y=v?g:b,w=Eo(i||"/",l,y,m.preview||null,e),_=f.useMemo(()=>i&&typeof i=="object"&&"draftMode"in i&&i.draftMode?(console.warn("previewUrl.draftMode is deprecated, use previewUrl.previewMode instead"),i.draftMode.shareAccess!==!1):i&&typeof i=="object"&&"previewMode"in i&&i.previewMode?i.previewMode.shareAccess!==!1:!1,[i]),[x]=f.useState(()=>{var q;const $=(q=r.options)==null?void 0:q.devMode;return typeof $=="function"?$():typeof $=="boolean"?$:typeof window<"u"&&window.location.hostname==="localhost"}),E=f.useMemo(()=>w.origin,[w.origin]),R=f.useRef(null),[S,I]=f.useState(),[P,j]=f.useState(null),T=f.useRef({title:void 0,url:void 0}),{navigate:A,navigationHistory:k,params:C,searchParams:M,structureParams:D}=Po({initialPreviewUrl:w,routerNavigate:d,routerState:h,routerSearchParams:m,frameStateRef:T}),O=f.useMemo(()=>Tn(A,50),[A]),[z,N]=f.useReducer(or,{},ir),X=f.useMemo(()=>C.viewport?"mobile":"desktop",[C.viewport]),[V,J]=io(y,T),re=cr(),ie=lr(),W=po({navigate:A,navigationHistory:k,path:C.preview,previewUrl:(ze=r.options)==null?void 0:ze.previewUrl,resolvers:(Pe=(xe=r.options)==null?void 0:xe.resolve)==null?void 0:Pe.mainDocuments}),[Z,ce]=gt(),[le,H]=gt(),[F,B]=gt(),{open:K}=So(S),se=z.iframe.status==="loading";f.useEffect(()=>{var U;const $=(U=R.current)==null?void 0:U.contentWindow;if(!$||se)return;const q=xs({targetOrigin:E});return q.addTarget($),I(q),()=>{q.destroy(),I(void 0)}},[E,se]);const G=un(($,q,U)=>O($,q,U));f.useEffect(()=>{if(!S)return;const $=S.createChannel({name:"presentation",heartbeat:!0,connectTo:"visual-editing"},rt().provide({actors:Bt()}));$.on("visual-editing/focus",U=>{"id"in U&&G({type:U.type,id:U.id,path:U.path})}),$.on("visual-editing/navigate",U=>{const{title:Wn,url:Ge}=U;if(T.current.url!==Ge)try{const[Dn,Nn]=Ge.split("?"),Qe=new URLSearchParams(Nn);Qe.delete(Ne),Qe.delete(jt),G({},{preview:`${Dn}${Qe.size>0?"?":""}${Qe}`})}catch{G({},{preview:Ge})}T.current={title:Wn,url:Ge}}),$.on("visual-editing/meta",U=>{T.current.title=U.title}),$.on("visual-editing/toggle",U=>{N({type:ur,enabled:U.enabled})}),$.on("visual-editing/documents",U=>{J("visual-editing",U.perspective,U.documents)}),$.on("visual-editing/refreshing",U=>{U.source==="manual"?clearTimeout(be.current):U.source==="mutation"&&N({type:qt})}),$.on("visual-editing/refreshed",()=>{N({type:dn})}),$.onStatus(ce);const q=$.start();return j($),()=>{q(),j(null)}},[S,J,ce,E]),f.useEffect(()=>{if(!S)return;const $=S.createChannel({name:"presentation",connectTo:"preview-kit",heartbeat:!0},rt().provide({actors:Bt()}));return $.onStatus(B),$.on("preview-kit/documents",q=>{q.projectId===re&&q.dataset===ie&&J("preview-kit",q.perspective,q.documents)}),$.start()},[S,ie,re,J,B,E]);const ee=f.useCallback($=>{O({path:pn.toString($)},{},!0)},[O]),Y=f.useCallback($=>{const q=new URL($,w.origin),U=q.pathname+q.search;q.origin===w.origin&&U!==C.preview&&O({},{preview:U})},[w,C,O]),ae=f.useCallback($=>{O({},$)},[O]);f.useEffect(()=>{C.id&&C.path?P==null||P.post("presentation/focus",{id:C.id,path:C.path}):P==null||P.post("presentation/blur")},[C.id,C.path,P]),f.useEffect(()=>{T.current.url&&C.preview&&T.current.url!==C.preview&&(T.current.url=C.preview,Z!=="connected"&&R.current?R.current.src=`${E}${C.preview}`:P==null||P.post("presentation/navigate",{url:C.preview,type:"replace"}))},[Z,E,C.preview,P]);const oe=f.useCallback(()=>P==null?void 0:P.post("presentation/toggle-overlay"),[P]),[he,fe]=f.useState(null);f.useEffect(()=>{const $=U=>{Zt(U)&&oe()},q=U=>{Zt(U)&&oe(),Fo(["mod","\\"],U)&&oe()};return window.addEventListener("keydown",q),window.addEventListener("keyup",$),()=>{window.removeEventListener("keydown",q),window.removeEventListener("keyup",$)}},[oe]);const[_e,me]=f.useState(null),[{navigatorEnabled:je,toggleNavigator:ge},Ee]=za({unstable_navigator:c}),be=f.useRef(void 0),Ce=f.useCallback($=>{if(N({type:qt}),P){be.current=window.setTimeout($,300),P.post("presentation/refresh",{source:"manual",livePreviewEnabled:F==="connected"||le==="connected"});return}$()},[le,F,P]),Le=dr(),Re=f.useCallback(({id:$,type:q,path:U})=>{if(T.current.url)return{title:T.current.title||T.current.url,name:"edit",params:{id:$,path:U,type:q,inspect:mr,workspace:Le.name,mode:pr,preview:C.preview}}},[C.preview,Le.name]),Te=f.useCallback($=>{O({},{viewport:$==="desktop"?void 0:"mobile"},!0)},[O]);return u.jsxs(u.Fragment,{children:[u.jsx(qa,{devMode:x,name:l,navigate:O,params:C,searchParams:M,structureParams:D,children:u.jsx(Oa,{navigate:O,children:u.jsx(Ua,{params:C,children:u.jsx(Gs,{comlink:P,children:u.jsx(No,{height:"fill",children:u.jsxs(aa,{children:[u.jsx(Ee,{}),u.jsx(Wt,{id:"preview",minWidth:325,defaultSize:je?50:75,order:3,children:u.jsx(ne,{direction:"column",flex:1,height:"fill",ref:me,children:u.jsx(hr,{element:_e,children:u.jsx(Ln,{canSharePreviewAccess:_,canToggleSharePreviewAccess:t,canUseSharedPreviewAccess:a,dispatch:N,header:p,iframe:z.iframe,initialUrl:w,loadersConnection:le,navigatorEnabled:je,onPathChange:Y,onRefresh:Ce,openPopup:K,overlaysConnection:Z,previewUrl:C.preview,perspective:y,ref:R,setViewport:Te,targetOrigin:E,toggleNavigator:ge,toggleOverlay:oe,viewport:X,visualEditing:z.visualEditing,vercelProtectionBypass:s},E)})})}),u.jsx($a,{documentId:C.id,documentsOnPage:V,documentType:C.type,getCommentIntent:Re,mainDocumentState:W,onFocusPath:ee,onStructureParams:ae,searchParams:M,setDisplayedDocument:fe,structureParams:D})]})})})})})}),u.jsxs(f.Suspense,{children:[S&&u.jsx(Mo,{controller:S,perspective:y,liveDocument:he,onDocumentsOnPage:J,onLoadersConnection:H}),P&&C.id&&C.type&&u.jsx(Oo,{comlink:P,id:C.id,type:C.type,loadersConnection:le,previewKitConnection:F}),P&&u.jsx(Wo,{comlink:P,perspective:y}),P&&V.length>0&&u.jsx(zo,{comlink:P,perspective:y,refs:V}),P&&u.jsx($o,{comlink:P,perspective:y}),P&&u.jsx(Bs,{comlink:P}),P&&u.jsx(Lo,{comlink:P,perspective:y}),P&&u.jsx(Do,{comlink:P})]})]})}function Zt(n){return n.key==="Alt"}const qo=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),en={alt:"altKey",ctrl:"ctrlKey",mod:qo?"metaKey":"ctrlKey",shift:"shiftKey"};function Fo(n,e){return n.every(t=>en[t]?e[en[t]]:e.key===t.toUpperCase())}function Vo(){const n=L.c(7);let e;n[0]===Symbol.for("react.memo_cache_sentinel")?(e={apiVersion:Be},n[0]=e):e=n[0];const t=He(e),[a,r]=f.useReducer(Ho,"loading"),[s,o]=f.useState(null);let i,l;n[1]!==t?(i=()=>{const p=Vs(t,d=>{o(d),r()});return()=>p()},l=[t],n[1]=t,n[2]=i,n[3]=l):(i=n[2],l=n[3]),f.useEffect(i,l);let c;return n[4]!==a||n[5]!==s?(c=[s,a],n[4]=a,n[5]=s,n[6]=c):c=n[6],c}function Ho(){return"ready"}function Bo(n){const e=L.c(17),{t}=ve(ye),{previewUrl:a}=n.tool.options??{},{push:r}=on(),s=typeof a=="object"||typeof a=="function",o=rr(),[i,l]=f.useState(null),[c,p]=f.useState(null),[d,h]=f.useState(null),[m,g]=f.useState(null);let b,v;e[0]!==o||e[1]!==s?(b=()=>{if(!s)return;const j=o.checkDocumentPermission("create",{_id:$e,_type:Ue}).subscribe(l),T=o.checkDocumentPermission("update",{_id:$e,_type:Ue}).subscribe(p),A=o.checkDocumentPermission("read",{_id:$e,_type:Ue}).subscribe(h),k=o.checkDocumentPermission("create",{_id:`drafts.${sn()}`,_type:an}).subscribe(g);return()=>{j.unsubscribe(),T.unsubscribe(),A.unsubscribe(),k.unsubscribe()}},v=[o,s],e[0]=o,e[1]=s,e[2]=b,e[3]=v):(b=e[2],v=e[3]),f.useEffect(b,v);const y=m==null?void 0:m.granted;let w,_;e[4]!==y||e[5]!==r||e[6]!==t||e[7]!==s?(w=()=>{if(!s||y!==!1)return;const j=requestAnimationFrame(()=>r({closable:!0,status:"error",duration:3e4,title:t("preview-url-secret.missing-grants")}));return()=>cancelAnimationFrame(j)},_=[y,r,t,s],e[4]=y,e[5]=r,e[6]=t,e[7]=s,e[8]=w,e[9]=_):(w=e[8],_=e[9]),f.useEffect(w,_);const[x,E]=Vo();if(E==="loading"||s&&(!i||typeof i.granted>"u"||!c||typeof c.granted>"u"||!m||!d||typeof d.granted>"u"||typeof m.granted>"u")){let j;return e[10]===Symbol.for("react.memo_cache_sentinel")?(j=u.jsx(cn,{}),e[10]=j):j=e[10],j}const R=y===!0,S=(i==null?void 0:i.granted)===!0&&(c==null?void 0:c.granted)===!0,I=(d==null?void 0:d.granted)===!0;let P;return e[11]!==n||e[12]!==R||e[13]!==S||e[14]!==I||e[15]!==x?(P=u.jsx(Uo,{...n,vercelProtectionBypass:x,canCreateUrlPreviewSecrets:R,canToggleSharePreviewAccess:S,canUseSharedPreviewAccess:I}),e[11]=n,e[12]=R,e[13]=S,e[14]=I,e[15]=x,e[16]=P):P=e[16],P}const Qo=Object.freeze(Object.defineProperty({__proto__:null,default:Bo},Symbol.toStringTag,{value:"Module"}));export{Qo as P,Bt as a,rt as c};
